# –†–æ–∑–¥—ñ–ª 16: –û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º —Ç–∞ PWA-—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—É —î –æ–¥–Ω—ñ—î—é –∑ –∫–ª—é—á–æ–≤–∏—Ö –ø–µ—Ä–µ–≤–∞–≥ –Ω–∞—à–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç—É. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ CRM –Ω–∞–≤—ñ—Ç—å –∑–∞ —É–º–æ–≤ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–æ–≥–æ –∞–±–æ –≤—ñ–¥—Å—É—Ç–Ω—å–æ–≥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è—Ö Progressive Web App (PWA).

## 16.1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –æ—Ñ–ª–∞–π–Ω-—Ä–æ–±–æ—Ç–∏

### 16.1.1. Service Worker –¥–ª—è –ö–µ—à—É–≤–∞–Ω–Ω—è

Service Worker (SW) ‚Äî —Ü–µ —Å–∫—Ä–∏–ø—Ç, —â–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ —Ç–∞ –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î –º–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –∫–µ—Ä—É–≤–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è–º.

*   **–ö–µ—à—É–≤–∞–Ω–Ω—è –æ–±–æ–ª–æ–Ω–∫–∏ –¥–æ–¥–∞—Ç–∫—É (App Shell):** –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—ñ SW –∫–µ—à—É—î –≤—Å—ñ —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏: HTML, CSS, JavaScript, —à—Ä–∏—Ñ—Ç–∏ —Ç–∞ —ñ–∫–æ–Ω–∫–∏. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –º–∏—Ç—Ç—î–≤–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è—Ö, –Ω–∞–≤—ñ—Ç—å –±–µ–∑ –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ—Ä–µ–∂—ñ.
*   **–ö–µ—à—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö API:** –ó–∞–ø–∏—Ç–∏ –Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (GET) —Ç–∞–∫–æ–∂ –∫–µ—à—É—é—Ç—å—Å—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è **Stale-While-Revalidate**: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∏—Ç—Ç—î–≤–æ –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ –∑ –∫–µ—à—É, –∞ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–∏—Ö –¥–∞–Ω–∏—Ö, —è–∫—â–æ —î –∑'—î–¥–Ω–∞–Ω–Ω—è.

**–ü—Ä–∏–∫–ª–∞–¥ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó –∫–µ—à—É–≤–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Workbox:**
```javascript
// service-worker.js
import { precacheAndRoute } from 'workbox-precaching';
import { registerRoute } from 'workbox-routing';
import { NetworkFirst, CacheFirst, StaleWhileRevalidate } from 'workbox-strategies';

// –ö–µ—à—É—î–º–æ —Å—Ç–∞—Ç–∏—á–Ω—ñ –∞–∫—Ç–∏–≤–∏, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –ø—Ä–∏ –∑–±—ñ—Ä—Ü—ñ
precacheAndRoute(self.__WB_MANIFEST);

// –î–ª—è API-–∑–∞–ø–∏—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ NetworkFirst: —Å–ø–æ—á–∞—Ç–∫—É –º–µ—Ä–µ–∂–∞, –ø–æ—Ç—ñ–º –∫–µ—à
registerRoute(
  ({ url }) => url.pathname.startsWith('/api/'),
  new NetworkFirst({
    cacheName: 'api-cache',
    networkTimeoutSeconds: 5, // –¢–∞–π–º–∞—É—Ç –¥–ª—è –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
  })
);

// –î–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å - CacheFirst: —Å–ø–æ—á–∞—Ç–∫—É –∫–µ—à, –ø–æ—Ç—ñ–º –º–µ—Ä–µ–∂–∞
registerRoute(
  ({ request }) => request.destination === 'image',
  new CacheFirst({
    cacheName: 'image-cache',
  })
);
```

### 16.1.2. –õ–æ–∫–∞–ª—å–Ω–µ —Å—Ö–æ–≤–∏—â–µ (IndexedDB)

–î–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö (—Å–ø–∏—Å–∫–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤, —É–≥–æ–¥) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **IndexedDB**. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –Ω–µ —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Ä–∞–Ω—ñ—à–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –¥–∞–Ω—ñ –≤ –æ—Ñ–ª–∞–π–Ω—ñ, –∞–ª–µ –π —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –Ω–æ–≤—ñ.

### 16.1.3. –ß–µ—Ä–≥–∞ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

–£—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —â–æ –∑–º—ñ–Ω—é—é—Ç—å –¥–∞–Ω—ñ (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –≤–∏–¥–∞–ª–µ–Ω–Ω—è), –≤–∏–∫–æ–Ω–∞–Ω—ñ –≤ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ñ, –Ω–µ –∑–Ω–∏–∫–∞—é—Ç—å, –∞ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ—ó —á–µ—Ä–≥–∏, —è–∫–∞ —Ç–∞–∫–æ–∂ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ IndexedDB –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ.

*   **–û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π UI:** –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–∏—Ç—Ç—î–≤–æ —Ä–µ–∞–≥—É—î –Ω–∞ –¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∑–º—ñ–Ω–∏, –ø–æ–∑–Ω–∞—á–∞—é—á–∏ —ó—Ö —è–∫ "–æ—á—ñ–∫—É—é—á—ñ –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—é".
*   **–§–æ–Ω–æ–≤–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:** –ö–æ–ª–∏ –∑'—è–≤–ª—è—î—Ç—å—Å—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è, **Background Sync API** (—è–∫—â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º) –∞–±–æ –ª–æ–≥—ñ–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –¥–æ–¥–∞—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î —á–µ—Ä–≥—É, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—á–∏ –∑–∞–ø–∏—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

## 16.2. –ú–µ—Ö–∞–Ω—ñ–∑–º –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ö–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤

–ù–∞–¥—ñ–π–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —î –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–º: –≤—ñ–Ω –Ω–µ —Ç—ñ–ª—å–∫–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ª–æ–∫–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–∏, –∞–ª–µ –π –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–º—ñ–Ω–∏, —â–æ –≤—ñ–¥–±—É–ª–∏—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.

1.  **–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤ –æ–Ω–ª–∞–π–Ω:** –î–æ–¥–∞—Ç–æ–∫ –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É—î –ø–æ–¥—ñ—é `navigator.onLine` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó.
2.  **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –∑ —Å–µ—Ä–≤–µ—Ä–∞ (Pull):** –ü–µ—Ä—à–∏–º –∫—Ä–æ–∫–æ–º –ø—ñ—Å–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è —î –∑–∞–ø–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Å—ñ–≤, —â–æ –∑–º—ñ–Ω–∏–ª–∏—Å—è –∑ –º–æ–º–µ–Ω—Ç—É –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–∞ –º—ñ—Ç–∫–∞ —á–∞—Å—É `lastSyncAt`. –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î –≤—Å—ñ –∑–∞–ø–∏—Å–∏, –¥–µ `updated_at > lastSyncAt`. –ö–ª—ñ—î–Ω—Ç –æ–Ω–æ–≤–ª—é—î —Å–≤—ñ–π –ª–æ–∫–∞–ª—å–Ω–∏–π –∫–µ—à (IndexedDB).
3.  **–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω (Push):** –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Å–∏—Å—Ç–µ–º–∞ –ø–æ—á–∏–Ω–∞—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ —á–µ—Ä–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
4.  **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö:** –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è: —Ç–∏–º—á–∞—Å–æ–≤—ñ ID (`temp-id-123`) –∑–∞–º—ñ–Ω—é—é—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ, –∞ —Å—Ç–∞—Ç—É—Å "–æ—á—ñ–∫—É—î —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó" –∑–Ω—ñ–º–∞—î—Ç—å—Å—è. –û–ø–µ—Ä–∞—Ü—ñ—è –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ —á–µ—Ä–≥–∏.
5.  **–í–∏—Ä—ñ—à–µ–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤:**
    *   **–°—Ç—Ä–∞—Ç–µ–≥—ñ—è:** –î–ª—è MVP –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Å—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è "Last Write Wins" (–û—Å—Ç–∞–Ω–Ω—ñ–π –∑–∞–ø–∏—Å –ø–µ—Ä–µ–º–∞–≥–∞—î).
    *   **–î–µ—Ç–µ–∫—Ü—ñ—è:** –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –≤–∏–Ω–∏–∫–∞—î, —è–∫—â–æ –ø—ñ–¥ —á–∞—Å –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω (–∫—Ä–æ–∫ 3) –≤–∏—è–≤–ª—è—î—Ç—å—Å—è, —â–æ –≤–µ—Ä—Å—ñ—è –∑–∞–ø–∏—Å—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –Ω–æ–≤—ñ—à–∞, –Ω—ñ–∂ —Ç–∞, –Ω–∞ –æ—Å–Ω–æ–≤—ñ —è–∫–æ—ó —Ä–æ–±–∏–ª–∞—Å—è –æ—Ñ–ª–∞–π–Ω-–∑–º—ñ–Ω–∞. –¶–µ –º–æ–∂–Ω–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –∑–∞ –ø–æ–ª–µ–º `updated_at`. –£ —Ç–∞–∫–æ–º—É –≤–∏–ø–∞–¥–∫—É –ª–æ–∫–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–∞ –º–æ–∂–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ –∑–º—ñ–Ω—É —ñ–Ω—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –í –º–∞–π–±—É—Ç–Ω—å–æ–º—É —Ç—É—Ç –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ UI –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–ª–∏—Ç—Ç—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤.
    *   **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** –Ø–∫—â–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–∞–∑–Ω–∞—î –Ω–µ–≤–¥–∞—á—ñ —á–µ—Ä–µ–∑ –ª–æ–≥—ñ—á–Ω—É –ø–æ–º–∏–ª–∫—É (–Ω–∞–ø—Ä., –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ), –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –∑ —á–µ—Ä–≥–∏, –∞ –ø–æ–∑–Ω–∞—á–∞—î—Ç—å—Å—è —è–∫ "–ø–æ–º–∏–ª–∫–æ–≤–∞". –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –¥–∞–Ω—ñ —Ç–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —Å–ø—Ä–æ–±—É.

## 16.3. –û–±—Ä–æ–±–∫–∞ –ó–∞–ª–µ–∂–Ω–∏—Ö –û–ø–µ—Ä–∞—Ü—ñ–π

–í–∞–∂–ª–∏–≤–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π, —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –æ—Ñ–ª–∞–π–Ω.
*   **–ü—Ä–∏–∫–ª–∞–¥:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ñ–ª–∞–π–Ω —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞ (ID `temp-customer-1`), –∞ –ø–æ—Ç—ñ–º –¥–ª—è –Ω—å–æ–≥–æ —Å—Ç–≤–æ—Ä—é—î —É–≥–æ–¥—É, –ø–æ—Å–∏–ª–∞—é—á–∏—Å—å –Ω–∞ —Ü–µ–π —Ç–∏–º—á–∞—Å–æ–≤–∏–π ID.
*   **–†—ñ—à–µ–Ω–Ω—è:** –ß–µ—Ä–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—é. –°–ø–æ—á–∞—Ç–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑–∞–ø–∏—Ç –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞. –°–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∞–ª—å–Ω–∏–π ID (`real-customer-A`). –ü–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —É–≥–æ–¥–∏) –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –ø—ñ–¥–º—ñ–Ω—è—î —Ç–∏–º—á–∞—Å–æ–≤–∏–π ID `temp-customer-1` –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π `real-customer-A` –≤ –¥–∞–Ω–∏—Ö –¥–ª—è —É–≥–æ–¥–∏.

## 16.4. –ü—Ä–∏–∫–ª–∞–¥ —Å—Ü–µ–Ω–∞—Ä—ñ—é —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó

1.  –ú–µ–Ω–µ–¥–∂–µ—Ä –≤ –¥–æ—Ä–æ–∑—ñ (–æ—Ñ–ª–∞–π–Ω) –≤—ñ–¥–∫—Ä–∏–≤–∞—î PWA.
2.  –í—ñ–Ω —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É —É–≥–æ–¥—É –¥–ª—è —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞. –î–æ–¥–∞—Ç–æ–∫ –ø—Ä–∏—Å–≤–æ—é—î —ó–π —Ç–∏–º—á–∞—Å–æ–≤–∏–π ID (`temp-deal-123`), –∑–±–µ—Ä—ñ–≥–∞—î –≤ IndexedDB —Ç–∞ –¥–æ–¥–∞—î –¥–æ —á–µ—Ä–≥–∏. –í —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ —É–≥–æ–¥–∞ –º–∏—Ç—Ç—î–≤–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è –∑ –ø–æ–∑–Ω–∞—á–∫–æ—é "üîÑ".
3.  –í —Ü–µ–π –∂–µ —á–∞—Å, —ñ–Ω—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤ –æ—Ñ—ñ—Å—ñ (–æ–Ω–ª–∞–π–Ω) –∑–º—ñ–Ω—é—î –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É —Ü—å–æ–≥–æ –∂ –∫–ª—ñ—î–Ω—Ç–∞.
4.  –ö–æ–ª–∏ –ø–µ—Ä—à–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –≤ –æ—Ñ—ñ—Å —ñ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ Wi-Fi, –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:
    a. **Pull:** –î–æ–¥–∞—Ç–æ–∫ –∑–∞–ø–∏—Ç—É—î –∑–º—ñ–Ω–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞, —â–æ —Å—Ç–∞–ª–∏—Å—è –ø—ñ—Å–ª—è `lastSyncAt`. –í—ñ–Ω –æ—Ç—Ä–∏–º—É—î –æ–Ω–æ–≤–ª–µ–Ω—ñ –¥–∞–Ω—ñ –ø—Ä–æ –∫–ª—ñ—î–Ω—Ç–∞ —ñ –æ–Ω–æ–≤–ª—é—î –ª–æ–∫–∞–ª—å–Ω—É –∫–æ–ø—ñ—é –≤ IndexedDB.
    b. **Push:** –î–æ–¥–∞—Ç–æ–∫ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —É–≥–æ–¥–∏ (`temp-deal-123`) –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
    c. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è:** –°–µ—Ä–≤–µ—Ä —Å—Ç–≤–æ—Ä—é—î –∑–∞–ø–∏—Å, –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∞–ª—å–Ω–∏–π ID (`real-deal-789`). –ö–ª—ñ—î–Ω—Ç –æ–Ω–æ–≤–ª—é—î –ª–æ–∫–∞–ª—å–Ω—É —É–≥–æ–¥—É —ñ –≤–∏–¥–∞–ª—è—î –æ–ø–µ—Ä–∞—Ü—ñ—é –∑ —á–µ—Ä–≥–∏.
5.  –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å—ñ –¥–∞–Ω—ñ –∞–∫—Ç—É–∞–ª—å–Ω—ñ.

## 16.5. –ö—Ä–∞–π–Ω—ñ –≤–∏–ø–∞–¥–∫–∏ (Edge Cases)

*   **–ó–∞–∫—Ä–∏—Ç—Ç—è –¥–æ–¥–∞—Ç–∫—É –¥–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó:** –û—Å–∫—ñ–ª—å–∫–∏ —á–µ—Ä–≥–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ IndexedDB, –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –¥–æ–¥–∞—Ç–∫—É (–≤–∂–µ –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è–º) –ø—Ä–æ—Ü–µ—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –≤—ñ–¥–Ω–æ–≤–∏—Ç—å—Å—è.
*   **–î—É–±–ª—é–≤–∞–Ω–Ω—è –¥—ñ–π:** –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ –Ω–∞—Ç–∏—Å–Ω–µ "–ó–±–µ—Ä–µ–≥—Ç–∏" –≤ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ñ, –º–æ–∂–µ –≤–∏–Ω–∏–∫–Ω—É—Ç–∏ –∫—ñ–ª—å–∫–∞ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ —É —á–µ—Ä–∑—ñ. –©–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ —Ü—å–æ–º—É, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–≤–∏–Ω–µ–Ω –±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó.
*   **–í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏:** –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ñ–æ—Ç–æ –¥–æ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤) –≤ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ñ –¥–ª—è MVP –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –ø–æ—Ç—Ä–µ–±—É—î —Å–∫–ª–∞–¥–Ω—ñ—à–æ—ó –ª–æ–≥—ñ–∫–∏ –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –≤–µ–ª–∏–∫–∏—Ö –æ–±'—î–º—ñ–≤ –¥–∞–Ω–∏—Ö.

## 16.6. –û–±–º–µ–∂–µ–Ω–Ω—è –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—É

| –§—É–Ω–∫—Ü—ñ—è | –ü—Ä–∞—Ü—é—î –æ—Ñ–ª–∞–π–Ω | –ü—Ä–∏–º—ñ—Ç–∫–∏ |
|---|---|---|
| –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö | ‚úÖ | |
| –°—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å—ñ–≤ | ‚úÖ | –ó–∞–ø–∏—Å–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ —á–µ—Ä–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó. |
| –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ ¬´–ù–æ–≤–∞ –ü–æ—à—Ç–∞¬ª | ‚ùå | –í–∏–º–∞–≥–∞—î –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ API. |
| –í—ñ–¥–ø—Ä–∞–≤–∫–∞ Email/SMS | ‚ùå | –í–∏–º–∞–≥–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ –º–µ—Ä–µ–∂—ñ. |
| –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (Login) | ‚ùå | –ù–æ–≤–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –Ω–µ–º–æ–∂–ª–∏–≤–∞. –ü—Ä–æ—Ç–µ, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π, –π–æ–≥–æ —Å–µ—Å—ñ—è –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∞ –æ—Ñ–ª–∞–π–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –∑–∞–∫–µ—à–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö. |
