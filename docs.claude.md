# CRM SaaS â€” ĞŸĞ¾Ğ²Ğ½Ğ° Ñ‚ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ğ° ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ

**Ğ’ĞµÑ€ÑÑ–Ñ:** 1.0  
**Ğ”Ğ°Ñ‚Ğ°:** 26 Ğ³Ñ€ÑƒĞ´Ğ½Ñ 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ready for Development  

---

## 1. Product Vision

### 1.1 ĞœÑ–ÑÑ–Ñ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñƒ
ĞĞ°Ğ´Ğ°Ñ‚Ğ¸ Ğ¼Ğ°Ğ»Ğ¾Ğ¼Ñƒ Ñ‚Ğ° ÑĞµÑ€ĞµĞ´Ğ½ÑŒĞ¾Ğ¼Ñƒ Ğ±Ñ–Ğ·Ğ½ĞµÑÑƒ Ğ² Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ñ– Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¸Ğ¹, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¸Ğ¹ Ñƒ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ– CRM Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚, ÑĞºĞ¸Ğ¹ Ğ¿Ñ€Ğ°Ñ†ÑÑ” Ğ½Ğ°Ğ²Ñ–Ñ‚ÑŒ Ğ±ĞµĞ· Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ñƒ Ñ‚Ğ° Ñ–Ğ½Ñ‚ĞµĞ³Ñ€ÑƒÑ”Ñ‚ÑŒÑÑ Ğ· Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ñ–ÑĞ°Ğ¼Ğ¸.

### 1.2 Ğ¦Ñ–Ğ»ÑŒĞ¾Ğ²Ğ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ

| Ğ¡ĞµĞ³Ğ¼ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸Ñ | Ğ Ğ¾Ğ·Ğ¼Ñ–Ñ€ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ | Pain Points |
|---------|------|----------------|-------------|
| **ĞœÑ–ĞºÑ€Ğ¾Ğ±Ñ–Ğ·Ğ½ĞµÑ** | Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ– Ñ‚Ğ¾Ñ‡ĞºĞ¸, Ğ¡Ğ¢Ğ, ÑĞ°Ğ»Ğ¾Ğ½Ğ¸ ĞºÑ€Ğ°ÑĞ¸ | 1-5 Ğ¾ÑÑ–Ğ± | Excel/Ğ±Ğ»Ğ¾ĞºĞ½Ğ¾Ñ‚Ğ¸, Ğ·Ğ°Ğ±ÑƒĞ²Ğ°ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ², Ğ½ĞµĞ¼Ğ°Ñ” Ñ–ÑÑ‚Ğ¾Ñ€Ñ–Ñ— |
| **ĞœĞ°Ğ»Ğ¸Ğ¹ Ğ±Ñ–Ğ·Ğ½ĞµÑ** | ĞĞµĞ²ĞµĞ»Ğ¸ĞºÑ– Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ¸, ĞºĞ»Ñ–Ğ½Ñ–ĞºĞ¸, B2B Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ñ– | 5-20 Ğ¾ÑÑ–Ğ± | Ğ¥Ğ°Ğ¾Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ¿Ñ€Ğ¾Ñ†ĞµÑĞ¸, Ğ²Ñ‚Ñ€Ğ°Ñ‚Ğ° Ğ»Ñ–Ğ´Ñ–Ğ², Ğ½ĞµĞ¼Ğ°Ñ” Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸ |
| **Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹ Ğ±Ñ–Ğ·Ğ½ĞµÑ** | Ğ Ğ¾Ğ·Ğ´Ñ€Ñ–Ğ±Ğ½Ñ– Ğ¼ĞµÑ€ĞµĞ¶Ñ–, Ğ´Ğ¸ÑÑ‚Ñ€Ğ¸Ğ±'ÑÑ‚Ğ¾Ñ€Ğ¸ | 20-100 Ğ¾ÑÑ–Ğ± | ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ, Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ—, Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ |

### 1.3 ĞšĞ»ÑÑ‡Ğ¾Ğ²Ñ– Ğ´Ğ¸Ñ„ĞµÑ€ĞµĞ½Ñ†Ñ–Ğ°Ñ‚Ğ¾Ñ€Ğ¸

1. **Offline-first** â€” Ğ¿Ñ€Ğ°Ñ†ÑÑ” Ğ±ĞµĞ· Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ñƒ (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ¸)
2. **Mobile-first** â€” 70%+ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
3. **Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ– Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ—** â€” ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ° "Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸"
4. **Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° Ğ¼Ğ¾Ğ²Ğ°** â€” Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ¿ĞµÑ€ĞµĞºĞ»Ğ°Ğ´, Ğ° Ğ»Ğ¾ĞºĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ–Ğ²
5. **Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ†Ñ–Ğ½Ğ°** â€” Ğ²Ñ–Ğ´ 0 Ğ³Ñ€Ğ½ Ğ½Ğ° ÑÑ‚Ğ°Ñ€Ñ‚Ñ–

### 1.4 ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²Ğ° ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ñ–Ñ

**Ğ¤Ğ°Ğ·Ğ¸ Ñ€Ğ¾Ğ·Ğ²Ğ¸Ñ‚ĞºÑƒ:**

```
MVP (3 Ğ¼Ñ–Ñ) â†’ Launch (6 Ğ¼Ñ–Ñ) â†’ Growth (12 Ğ¼Ñ–Ñ) â†’ Scale (24+ Ğ¼Ñ–Ñ)
   â†“              â†“               â†“                â†“
Free tier    Paid plans      Marketplace      Enterprise
Core CRM     Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ—      API/Webhooks     White-label
```

### 1.5 Success Metrics

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | MVP Target | Launch Target | Growth Target |
|---------|-----------|---------------|---------------|
| MAU | 100 | 1,000 | 10,000 |
| Paying customers | 0 | 50 | 500 |
| MRR | $0 | $2,000 | $25,000 |
| Churn rate | â€” | <10% | <5% |
| NPS | â€” | 40+ | 50+ |

---

## 2. User Roles & Permissions

### 2.1 Ğ†Ñ”Ñ€Ğ°Ñ€Ñ…Ñ–Ñ Ñ€Ğ¾Ğ»ĞµĞ¹

```
Owner (Ğ²Ğ»Ğ°ÑĞ½Ğ¸Ğº)
    â†“
Admin (Ğ°Ğ´Ğ¼Ñ–Ğ½Ñ–ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€)
    â†“
Manager (Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€)
    â†“
User (ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡)
    â†“
Guest (Ğ³Ñ–ÑÑ‚ÑŒ/Ñ‡Ğ¸Ñ‚Ğ°Ñ‡)
```

### 2.2 Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ° Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ñ Ğ¿Ñ€Ğ°Ğ²

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ | Owner | Admin | Manager | User | Guest |
|---------|-------|-------|---------|------|-------|
| **ĞÑ€Ğ³Ğ°Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ** |
| Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ workspace | âœ… | âŒ | âŒ | âŒ | âŒ |
| Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ workspace | âœ… | âŒ | âŒ | âŒ | âŒ |
| Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ | âœ… | âœ… | âŒ | âŒ | âŒ |
| ĞšĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞºĞ¾Ñ | âœ… | âŒ | âŒ | âŒ | âŒ |
| **ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–** |
| Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° | âœ… | âœ… | âŒ | âŒ | âŒ |
| Ğ—Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ Ñ€Ğ¾Ğ»ÑŒ | âœ… | âœ…* | âŒ | âŒ | âŒ |
| Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° | âœ… | âœ…* | âŒ | âŒ | âŒ |
| **ĞšĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸** |
| Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ° | âœ… | âœ… | âœ… | âœ… | âŒ |
| Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ° | âœ… | âœ… | âœ… | ğŸ”¶** | âŒ |
| Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ° | âœ… | âœ… | âœ… | âŒ | âŒ |
| ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ñ‚Ğ¸ Ğ²ÑÑ–Ñ… ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ² | âœ… | âœ… | âœ… | ğŸ”¶*** | ğŸ”¶*** |
| **Ğ£Ğ³Ğ¾Ğ´Ğ¸** |
| Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ÑƒĞ³Ğ¾Ğ´Ñƒ | âœ… | âœ… | âœ… | âœ… | âŒ |
| Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑƒĞ³Ğ¾Ğ´Ñƒ | âœ… | âœ… | âœ… | ğŸ”¶** | âŒ |
| Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ÑƒĞ³Ğ¾Ğ´Ñƒ | âœ… | âœ… | âœ… | âŒ | âŒ |
| ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ñ‚Ğ¸ Ğ²ÑÑ– ÑƒĞ³Ğ¾Ğ´Ğ¸ | âœ… | âœ… | âœ… | ğŸ”¶*** | ğŸ”¶*** |
| **Ğ—Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ** |
| Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ | âœ… | âœ… | âœ… | âœ… | âŒ |
| ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚Ğ¸ Ğ½Ğ° Ñ–Ğ½ÑˆĞ¾Ğ³Ğ¾ | âœ… | âœ… | âœ… | âŒ | âŒ |
| Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ | âœ… | âœ… | âœ… | ğŸ”¶** | âŒ |
| **ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸/ĞŸĞ¾ÑĞ»ÑƒĞ³Ğ¸** |
| Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ | âœ… | âœ… | âœ… | âŒ | âŒ |
| Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ | âœ… | âœ… | âœ… | âŒ | âŒ |
| Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ | âœ… | âœ… | âŒ | âŒ | âŒ |
| **Ğ—Ğ²Ñ–Ñ‚Ğ¸** |
| ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ñ‚Ğ¸ Ğ²Ğ»Ğ°ÑĞ½Ñ– | âœ… | âœ… | âœ… | âœ… | âŒ |
| ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ´Ğ°Ñ‚Ğ¸ Ğ²ÑÑ– | âœ… | âœ… | âœ… | âŒ | âŒ |
| Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ | âœ… | âœ… | âœ… | âŒ | âŒ |
| **Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ—** |
| ĞĞ°Ğ»Ğ°ÑˆÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ | âœ… | âœ… | âŒ | âŒ | âŒ |
| Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ | âœ… | âœ… | âœ… | âœ… | âŒ |

**Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°:**
- âœ… â€” ĞŸĞ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿
- âŒ â€” ĞĞµĞ¼Ğ°Ñ” Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ
- ğŸ”¶* â€” ĞĞµ Ğ¼Ğ¾Ğ¶Ğµ Ğ·Ğ¼Ñ–Ğ½ÑĞ²Ğ°Ñ‚Ğ¸ Owner Ğ°Ğ±Ğ¾ Admin
- ğŸ”¶** â€” Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ ÑĞ²Ğ¾Ñ— Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
- ğŸ”¶*** â€” Ğ—Ğ°Ğ»ĞµĞ¶Ğ¸Ñ‚ÑŒ Ğ²Ñ–Ğ´ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ñ–

### 2.3 Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ¸Ñ…

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** Ğ—Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼ Ğ·Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ "Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ Ğ¿Ğ¾ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ".

| Ğ Ğ¾Ğ»ÑŒ | Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ² | Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ ÑƒĞ³Ğ¾Ğ´ | Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ |
|------|-------------------|----------------|-------------------|
| Owner/Admin | Ğ’ÑÑ– | Ğ’ÑÑ– | Ğ’ÑÑ– |
| Manager | Ğ’ÑÑ– | Ğ’ÑÑ– | Ğ’ÑÑ– |
| User | Ğ¡Ğ²Ğ¾Ñ— + Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ– | Ğ¡Ğ²Ğ¾Ñ— + Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ– | Ğ¡Ğ²Ğ¾Ñ— + Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ– |
| Guest | Ğ—Ğ° ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ | Ğ—Ğ° ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ | ĞĞµĞ¼Ğ°Ñ” |

**ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ñ– (Ğ½Ğ° Ñ€Ñ–Ğ²Ğ½Ñ– workspace):**
- `visibility_mode`: `"all"` | `"team"` | `"own"`
- `team_structure`: Ğ²Ñ–Ğ´Ğ´Ñ–Ğ»Ğ¸/ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ´Ğ»Ñ `"team"` Ñ€ĞµĞ¶Ğ¸Ğ¼Ñƒ

---

## 3. Functional Requirements

### 3.1 Core Modules (MVP)

#### 3.1.1 Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ°Ğ¼Ğ¸ (Contacts/Companies)

**Entities:**

**Contact (ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ â€” Ñ„Ñ–Ğ·Ğ¸Ñ‡Ğ½Ğ° Ğ¾ÑĞ¾Ğ±Ğ°)**
- ĞŸĞ†Ğ‘ (Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğµ)
- Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ + Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ–)
- Email (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ + Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ–)
- ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ (Ğ·Ğ²'ÑĞ·Ğ¾Ğº Ğ· Company)
- ĞŸĞ¾ÑĞ°Ğ´Ğ°
- Ğ¢ĞµĞ³Ğ¸
- Ğ”Ğ¶ĞµÑ€ĞµĞ»Ğ¾ Ğ»Ñ–Ğ´Ñ–Ğ²
- Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ (user_id)
- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: Ğ½Ğ¾Ğ²Ğ¸Ğ¹ | ĞºĞ²Ğ°Ğ»Ñ–Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ | ĞºĞ»Ñ–Ñ”Ğ½Ñ‚ | Ğ²Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹
- Ğ”Ğ°Ñ‚Ğ° ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ / Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ
- Custom fields (JSON)

**Company (ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ â€” ÑÑ€. Ğ¾ÑĞ¾Ğ±Ğ°)**
- ĞĞ°Ğ·Ğ²Ğ° (Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğµ)
- Ğ„Ğ”Ğ ĞŸĞĞ£/Ğ†ĞŸĞ
- ĞĞ´Ñ€ĞµÑĞ° (ÑÑ€Ğ¸Ğ´Ğ¸Ñ‡Ğ½Ğ°, Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡Ğ½Ğ°)
- Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ / Email
- Ğ¡Ğ°Ğ¹Ñ‚
- Ğ¢ĞµĞ³Ğ¸
- Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹
- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ
- Custom fields

**Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—:**
- CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ñ—
- Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ Ğ¿Ğ¾ÑˆÑƒĞº (Ğ¿Ğ¾ Ñ–Ğ¼ĞµĞ½Ñ–, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ, email)
- Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸ (ÑÑ‚Ğ°Ñ‚ÑƒÑ, Ñ‚ĞµĞ³Ğ¸, Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹, Ğ´Ğ¶ĞµÑ€ĞµĞ»Ğ¾)
- Ğ†Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ CSV/Excel
- Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ CSV/Excel
- ĞœĞ°ÑĞ¾Ğ²Ñ– Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ñ— (Ğ·Ğ¼Ñ–Ğ½Ğ° ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ, Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾)
- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ²Ğ·Ğ°Ñ”Ğ¼Ğ¾Ğ´Ñ–Ğ¹ (timeline)
- ĞŸÑ€Ğ¸ĞºÑ€Ñ–Ğ¿Ğ»ĞµĞ½Ğ½Ñ Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ²

#### 3.1.2 Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ ÑƒĞ³Ğ¾Ğ´Ğ°Ğ¼Ğ¸ (Deals/Pipeline)

**Deal (Ğ£Ğ³Ğ¾Ğ´Ğ°)**
- ĞĞ°Ğ·Ğ²Ğ°
- ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚/ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ (Ğ·Ğ²'ÑĞ·Ğ¾Ğº)
- Ğ¡ÑƒĞ¼Ğ°
- Ğ’Ğ°Ğ»ÑÑ‚Ğ° (UAH, USD, EUR)
- Ğ•Ñ‚Ğ°Ğ¿ (stage_id)
- Ğ™Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ñ–ÑÑ‚ÑŒ Ğ·Ğ°ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ (%)
- ĞÑ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ğ° Ğ´Ğ°Ñ‚Ğ° Ğ·Ğ°ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ
- Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹
- Ğ¢ĞµĞ³Ğ¸
- ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸/Ğ¿Ğ¾ÑĞ»ÑƒĞ³Ğ¸ (Ğ±Ğ°Ğ³Ğ°Ñ‚Ğ¾ Ğ´Ğ¾ Ğ±Ğ°Ğ³Ğ°Ñ‚ÑŒĞ¾Ñ…)
- Ğ”Ğ¶ĞµÑ€ĞµĞ»Ğ¾
- Ğ”Ğ°Ñ‚Ğ° ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ / Ğ·Ğ°ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ
- Custom fields

**Pipeline (Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ñ–Ğ²)**
- ĞĞ°Ğ·Ğ²Ğ°
- Ğ•Ñ‚Ğ°Ğ¿Ğ¸ (stages): Ğ¼Ğ°ÑĞ¸Ğ² Ğ¾Ğ±'Ñ”ĞºÑ‚Ñ–Ğ²
  - id, name, order, probability, color
  - Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ– ĞµÑ‚Ğ°Ğ¿Ğ¸: Ğ›Ñ–Ğ´ â†’ ĞšĞ²Ğ°Ğ»Ñ–Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ â†’ ĞŸÑ€Ğ¾Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ñ–Ñ â†’ ĞŸĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸ â†’ Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¾ (Ğ²Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ¾/Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¾)
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— ĞµÑ‚Ğ°Ğ¿Ñ–Ğ²

**Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—:**
- Kanban-Ğ´Ğ¾ÑˆĞºĞ° Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ¼Ñ–Ñ‰ĞµĞ½Ğ½Ñ ÑƒĞ³Ğ¾Ğ´
- CRUD ÑƒĞ³Ğ¾Ğ´
- Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸ (ĞµÑ‚Ğ°Ğ¿, Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹, ÑÑƒĞ¼Ğ°, Ğ´Ğ°Ñ‚Ğ°)
- ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ· Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ñ–Ğ² (ÑÑƒĞ¼Ğ° * Ğ¹Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ñ–ÑÑ‚ÑŒ)
- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ·Ğ¼Ñ–Ğ½ ĞµÑ‚Ğ°Ğ¿Ñ–Ğ²
- ĞĞ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ— Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– ĞµÑ‚Ğ°Ğ¿Ñƒ
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ´Ñ–Ñ— (Ğ½Ğ° ĞµÑ‚Ğ°Ğ¿Ñ– Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñƒ): ÑÑ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ, Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ¸ email (Ğ² Ğ¼Ğ°Ğ¹Ğ±ÑƒÑ‚Ğ½ÑŒĞ¾Ğ¼Ñƒ)

#### 3.1.3 Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»Ñ–Ğ½Ğ½Ñ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½ÑĞ¼Ğ¸ (Tasks)

**Task (Ğ—Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ)**
- ĞĞ°Ğ·Ğ²Ğ°
- ĞĞ¿Ğ¸Ñ
- Ğ¢Ğ¸Ğ¿: Ğ´Ğ·Ğ²Ñ–Ğ½Ğ¾Ğº | Ğ·ÑƒÑÑ‚Ñ€Ñ–Ñ‡ | email | todo
- ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚: Ğ½Ğ¸Ğ·ÑŒĞºĞ¸Ğ¹ | ÑĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹ | Ğ²Ğ¸ÑĞ¾ĞºĞ¸Ğ¹
- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: Ğ·Ğ°Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¾ | Ğ² Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ñ– | Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾ | ÑĞºĞ°ÑĞ¾Ğ²Ğ°Ğ½Ğ¾
- Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½ (Ğ´Ğ°Ñ‚Ğ° + Ñ‡Ğ°Ñ)
- Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ (assigned_to)
- Ğ—Ğ²'ÑĞ·Ğ°Ğ½Ñ– ÑÑƒÑ‚Ğ½Ğ¾ÑÑ‚Ñ–: contact_id, company_id, deal_id
- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ (Ğ¿Ñ–ÑĞ»Ñ Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ)
- Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ğ² (created_by)
- Ğ”Ğ°Ñ‚Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ / Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ

**Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—:**
- Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ
- ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ (Ğ´ĞµĞ½ÑŒ, Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ, Ğ¼Ñ–ÑÑÑ†ÑŒ)
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ (ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ, Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸)
- ĞĞ°Ğ³Ğ°Ğ´ÑƒĞ²Ğ°Ğ½Ğ½Ñ (Ğ·Ğ° 15 Ñ…Ğ², 1 Ğ³Ğ¾Ğ´, 1 Ğ´ĞµĞ½ÑŒ)
- Push-Ğ½Ğ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ—
- Ğ¨Ğ²Ğ¸Ğ´ĞºĞµ Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ Ğ· Ğ¼Ğ¾Ğ±Ñ–Ğ»ĞºĞ¸
- ĞŸĞµÑ€ĞµĞ½ĞµÑĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ (drag & drop)

#### 3.1.4 ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸ Ñ‚Ğ° Ğ¿Ğ¾ÑĞ»ÑƒĞ³Ğ¸ (Products)

**Product (ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚/ĞŸĞ¾ÑĞ»ÑƒĞ³Ğ°)**
- ĞĞ°Ğ·Ğ²Ğ°
- ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ» (SKU)
- ĞĞ¿Ğ¸Ñ
- Ğ¦Ñ–Ğ½Ğ°
- ĞĞ´Ğ¸Ğ½Ğ¸Ñ†Ñ Ğ²Ğ¸Ğ¼Ñ–Ñ€Ñƒ
- ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ
- ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹/Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹
- Custom fields

**Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ—:**
- CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ñ—
- ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ— (Ñ–Ñ”Ñ€Ğ°Ñ€Ñ…Ñ–Ñ‡Ğ½Ñ–)
- Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ Ğ¿Ğ¾ÑˆÑƒĞº Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ– ÑƒĞ³Ğ¾Ğ´Ğ¸
- ĞŸÑ€Ğ°Ğ¹Ñ-Ğ»Ğ¸ÑÑ‚Ğ¸ (ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚)
- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ·Ğ¼Ñ–Ğ½ Ñ†Ñ–Ğ½Ğ¸ (Ğ°ÑƒĞ´Ğ¸Ñ‚)

#### 3.1.5 Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ° Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° (Analytics)

**Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´:**
- ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑÑ–Ñ Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºĞ¸ (%)
- ĞšÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ ÑƒĞ³Ğ¾Ğ´ Ğ¿Ğ¾ ĞµÑ‚Ğ°Ğ¿Ğ°Ñ…
- Ğ¡ÑƒĞ¼Ğ° ÑƒĞ³Ğ¾Ğ´ Ğ¿Ğ¾ ĞµÑ‚Ğ°Ğ¿Ğ°Ñ…
- Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ Ğ¿Ğ»Ğ°Ğ½Ñƒ (ÑĞºÑ‰Ğ¾ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾)
- Ğ¢Ğ¾Ğ¿-Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ¸ (Ğ¿Ğ¾ ÑÑƒĞ¼Ñ–/ĞºÑ–Ğ»ÑŒĞºĞ¾ÑÑ‚Ñ– ÑƒĞ³Ğ¾Ğ´)
- Ğ”Ğ¶ĞµÑ€ĞµĞ»Ğ° Ğ»Ñ–Ğ´Ñ–Ğ² (Ñ€Ğ¾Ğ·Ğ¿Ğ¾Ğ´Ñ–Ğ»)
- Ğ”Ğ¸Ğ½Ğ°Ğ¼Ñ–ĞºĞ° Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğ°Ñ… (Ğ³Ñ€Ğ°Ñ„Ñ–Ğº)

**Ğ—Ğ²Ñ–Ñ‚Ğ¸:**
- ĞŸĞ¾ ÑƒĞ³Ğ¾Ğ´Ğ°Ñ… (Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸, ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚)
- ĞŸĞ¾ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½ÑÑ… (Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ Ğ² ÑÑ‚Ñ€Ğ¾Ğº)
- ĞŸĞ¾ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ°Ñ… (Ğ½Ğ¾Ğ²Ñ–, Ğ²Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ñ–)
- ĞŸĞ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ°Ñ… (Ğ½Ğ°Ğ¹Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ–ÑˆÑ–)

**ĞŸĞµÑ€Ñ–Ğ¾Ğ´:**
- Ğ¡ÑŒĞ¾Ğ³Ğ¾Ğ´Ğ½Ñ– / Ğ¢Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ / ĞœÑ–ÑÑÑ†ÑŒ / ĞšĞ²Ğ°Ñ€Ñ‚Ğ°Ğ» / Ğ Ñ–Ğº / Ğ”Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ¸Ğ¹

### 3.2 Additional Modules (Post-MVP)

#### 3.2.1 Email-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ
- ĞŸÑ–Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ Ğ¿Ğ¾ÑˆÑ‚Ğ¸ (IMAP/SMTP)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ–Ğ² Ğ· email
- Ğ—Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ»Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ² timeline
- Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ° email Ğ· CRM

#### 3.2.2 SMS-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ
- Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ° SMS Ñ‡ĞµÑ€ĞµĞ· Kyivstar/Vodafone API
- Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ SMS
- ĞœĞ°ÑĞ¾Ğ²Ğ° Ñ€Ğ¾Ğ·ÑĞ¸Ğ»ĞºĞ°

#### 3.2.3 ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ°
- Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ¢Ğ¢Ğ Ğ· ÑƒĞ³Ğ¾Ğ´Ğ¸
- Ğ’Ñ–Ğ´ÑÑ‚ĞµĞ¶ĞµĞ½Ğ½Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ ÑƒĞ³Ğ¾Ğ´Ğ¸

#### 3.2.4 ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
- Ğ¢Ñ€Ğ¸Ğ³ĞµÑ€Ğ¸ (Ğ¿Ğ¾Ğ´Ñ–Ñ â†’ Ğ´Ñ–Ñ)
- Workflows (ÑĞºĞ»Ğ°Ğ´Ğ½Ñ– Ğ»Ğ°Ğ½Ñ†ÑĞ¶ĞºĞ¸)
- Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ñ–Ñ— Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ñ–Ğ²

#### 3.2.5 Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ–Ğ², Ñ€Ğ°Ñ…ÑƒĞ½ĞºÑ–Ğ²
- Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ (Ğ· Ğ¿Ñ–Ğ´ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¾Ñ Ğ·Ğ¼Ñ–Ğ½Ğ½Ğ¸Ñ…)
- Ğ•Ğ¦ĞŸ (BankID Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ)

#### 3.2.6 Ğ¤Ñ–Ğ½Ğ°Ğ½ÑĞ¸
- Ğ Ğ°Ñ…ÑƒĞ½ĞºĞ¸ (invoices)
- ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ñ–
- Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ Ğ· Ğ±Ğ°Ğ½ĞºĞ°Ğ¼Ğ¸ (Monobank, ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ‘Ğ°Ğ½Ğº API)

### 3.3 ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹ (MoSCoW)

| Must Have (MVP) | Should Have (v1.5) | Could Have (v2.0) | Won't Have (Ğ¿Ğ¾ĞºĞ¸) |
|-----------------|-------------------|------------------|-------------------|
| ĞšĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸ CRUD | Email-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ | ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²Ñ– ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ— | CRM Ğ´Ğ»Ñ HoReCa |
| ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ— CRUD | SMS-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ | Ğ¡ĞºĞ»Ğ°Ğ´ÑÑŒĞºĞ¸Ğ¹ Ğ¾Ğ±Ğ»Ñ–Ğº | ERP Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ— |
| Ğ£Ğ³Ğ¾Ğ´Ğ¸ + Pipeline | ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ° | ĞŸÑ€Ğ¾ĞµĞºÑ‚Ğ½Ğ¸Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚ | Ğ‘ÑƒÑ…Ğ³Ğ°Ğ»Ñ‚ĞµÑ€Ñ–Ñ |
| Ğ—Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ + ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸ | Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ–Ñ | HR-Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ |
| ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸ | Ğ Ğ°Ñ…ÑƒĞ½ĞºĞ¸ | API Ğ´Ğ»Ñ Ñ€Ğ¾Ğ·Ñ€Ğ¾Ğ±Ğ½Ğ¸ĞºÑ–Ğ² | |
| Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ° Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° | Ğ‘Ğ°Ğ·Ğ¸ Ğ·Ğ½Ğ°Ğ½ÑŒ | Marketplace | |
| ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– + Ñ€Ğ¾Ğ»Ñ– | Ğ—Ğ²Ñ–Ñ‚Ğ¸ (Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ñ–) | White-label | |
| Mobile PWA | Ğ†Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ· Ñ–Ğ½ÑˆĞ¸Ñ… CRM | | |
| Offline-sync | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ (Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°) | | |

---

## 4. Non-Functional Requirements

### 4.1 Performance

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Target | Acceptable | Critical |
|---------|--------|-----------|----------|
| **Web (Desktop)** |
| FCP (First Contentful Paint) | <1.5s | <2.5s | >3s |
| LCP (Largest Contentful Paint) | <2s | <3s | >4s |
| TTI (Time to Interactive) | <2.5s | <4s | >5s |
| **Mobile (3G)** |
| FCP | <2.5s | <4s | >5s |
| LCP | <3s | <4.5s | >6s |
| TTI | <4s | <6s | >8s |
| **API Response** |
| Ğ§Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ (GET) | <100ms | <300ms | >500ms |
| Ğ—Ğ°Ğ¿Ğ¸Ñ (POST/PUT) | <200ms | <500ms | >1s |
| ĞŸĞ¾ÑˆÑƒĞº | <150ms | <400ms | >700ms |
| **Database** |
| Ğ—Ğ°Ğ¿Ğ¸Ñ‚ (simple) | <50ms | <100ms | >200ms |
| Ğ—Ğ°Ğ¿Ğ¸Ñ‚ (join) | <100ms | <250ms | >500ms |
| Ğ†Ğ½Ğ´ĞµĞºÑ Ğ¿Ğ¾ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ | >90% | >80% | <70% |
| **Offline Sync** |
| Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğµ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ | <50ms | <100ms | >200ms |
| Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ (10 Ğ·Ğ¼Ñ–Ğ½) | <2s | <5s | >10s |
| ĞšĞ¾Ğ½Ñ„Ğ»Ñ–ĞºÑ‚-Ñ€ĞµĞ·Ğ¾Ğ»ÑÑˆĞ½ | <500ms | <1s | >2s |

### 4.2 Scalability

**MVP (Free Tier):**
- ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ² Ğ½Ğ° workspace: Ğ´Ğ¾ 5
- ĞšĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²: Ğ´Ğ¾ 1,000
- Ğ£Ğ³Ğ¾Ğ´: Ğ´Ğ¾ 500
- Ğ—Ğ°Ğ¿Ğ¸ÑÑ–Ğ² Ğ² Ğ‘Ğ”: Ğ´Ğ¾ 10,000
- Ğ¤Ğ°Ğ¹Ğ»Ñ–Ğ²: Ğ´Ğ¾ 1GB
- API calls: Ğ´Ğ¾ 100,000/Ğ¼Ñ–Ñ

**Paid Tier:**
- ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²: Ğ´Ğ¾ 100
- ĞšĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²: Ğ´Ğ¾ 100,000
- Ğ£Ğ³Ğ¾Ğ´: Ğ´Ğ¾ 50,000
- Ğ—Ğ°Ğ¿Ğ¸ÑÑ–Ğ² Ğ² Ğ‘Ğ”: Ğ´Ğ¾ 1M
- Ğ¤Ğ°Ğ¹Ğ»Ñ–Ğ²: Ğ´Ğ¾ 100GB
- API calls: Ğ´Ğ¾ 10M/Ğ¼Ñ–Ñ

**Target Architecture (VPS):**
- ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²: Ğ½ĞµĞ¾Ğ±Ğ¼ĞµĞ¶ĞµĞ½Ğ¾
- Ğ“Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ
- Ğ¨Ğ°Ñ€Ğ´Ğ¸Ğ½Ğ³ Ğ‘Ğ” Ğ·Ğ° workspace_id
- CDN Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ¸

### 4.3 Availability

| Tier | Uptime SLA | Max Downtime/Ğ¼Ñ–Ñ | Support |
|------|-----------|------------------|---------|
| Free | 95% | ~36 Ğ³Ğ¾Ğ´ | Community |
| Starter | 99% | ~7 Ğ³Ğ¾Ğ´ | Email 48h |
| Pro | 99.5% | ~3.5 Ğ³Ğ¾Ğ´ | Email 24h |
| Enterprise | 99.9% | ~43 Ñ…Ğ² | Priority + Phone |

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** ĞĞ° MVP SLA Ğ½Ğµ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚ÑƒÑ”Ñ‚ÑŒÑÑ (best effort).

### 4.4 Security

**Authentication:**
- Email + Password (Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 8 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ², 1 Ğ²ĞµĞ»Ğ¸ĞºĞ°, 1 Ñ†Ğ¸Ñ„Ñ€Ğ°)
- OAuth2: Google, Microsoft (Post-MVP)
- 2FA: TOTP (Google Authenticator) â€” Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾
- Session timeout: 7 Ğ´Ğ½Ñ–Ğ² (Remember Me) Ğ°Ğ±Ğ¾ 1 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ°

**Authorization:**
- Row Level Security (RLS) Ğ² Supabase
- ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ½Ğ° Ñ€Ñ–Ğ²Ğ½Ñ– API
- Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²ÑÑ–Ñ… Ğ·Ğ¼Ñ–Ğ½ (audit log)

**Data Protection:**
- Ğ¨Ğ¸Ñ„Ñ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ² transit: TLS 1.3
- Ğ¨Ğ¸Ñ„Ñ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ at rest: Supabase default (AES-256)
- Sensitive fields: Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğµ ÑˆĞ¸Ñ„Ñ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ (ĞºĞ»ÑÑ‡ Ğ² env)
- Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ– ĞºĞ¾Ğ¿Ñ–Ñ—: Ñ‰Ğ¾Ğ´Ğ½Ñ (Supabase)

**API Security:**
- Rate limiting: 100 req/min per user (Vercel Edge Config)
- CORS: Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ĞµĞ½Ñ– Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¸
- CSRF protection: Next.js default
- SQL Injection: Supabase Prepared Statements
- XSS: React auto-escape + DOMPurify Ğ´Ğ»Ñ rich text

**Compliance:**
- Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ´Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ğ´Ğ°Ğ½Ğ¸Ñ… (GDPR)
- Export Ğ´Ğ°Ğ½Ğ¸Ñ… (GDPR)
- Cookie consent
- Privacy Policy + Terms of Service

### 4.5 Usability

**Mobile-first:**
- 60%+ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ² Ğ½Ğ° Ğ¼Ğ¾Ğ±Ñ–Ğ»ÑŒĞ½Ğ¸Ñ…
- Ğ’ÑÑ– Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ– Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ— Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñ–
- Touch-friendly (Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 44Ã—44px Ğ´Ğ»Ñ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº)
- Ğ–ĞµÑÑ‚Ğ¸: swipe to delete, pull to refresh

**Accessibility:**
- WCAG 2.1 Level AA (Ñ†Ñ–Ğ»ÑŒĞ¾Ğ²Ğ¸Ğ¹ Ñ€Ñ–Ğ²ĞµĞ½ÑŒ)
- Keyboard navigation
- Screen reader support (ARIA labels)
- ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ÑÑ‚Ğ½Ñ–ÑÑ‚ÑŒ: Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 4.5:1
- Font size: Ğ²Ñ–Ğ´ 16px (Ğ¼Ğ¾Ğ±Ñ–Ğ»ĞºĞ°)

**UX:**
- ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 3 ĞºĞ»Ñ–ĞºĞ¸ Ğ´Ğ¾ Ğ±ÑƒĞ´ÑŒ-ÑĞºĞ¾Ñ— Ñ„ÑƒĞ½ĞºÑ†Ñ–Ñ—
- Ğ¨Ğ²Ğ¸Ğ´ĞºÑ– Ğ´Ñ–Ñ— (FAB Ğ½Ğ° Ğ¼Ğ¾Ğ±Ñ–Ğ»Ñ†Ñ–)
- ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ñ– Ğ¼ĞµĞ½Ñ (Ğ´Ğ¾Ğ²Ğ³Ğµ Ğ½Ğ°Ñ‚Ğ¸ÑĞºĞ°Ğ½Ğ½Ñ)
- ĞŸĞ¾ÑˆÑƒĞº: instant search (debounce 300ms)
- ĞĞ²Ñ‚Ğ¾Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ (draft)

### 4.6 Maintainability

**Code Quality:**
- TypeScript strict mode
- ESLint + Prettier
- Test coverage: >70% (Ñ†Ñ–Ğ»ÑŒĞ¾Ğ²Ğ¸Ğ¹)
- Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ: JSDoc Ğ´Ğ»Ñ Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ñ… Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹

**Architecture:**
- FSD (Feature-Sliced Design)
- Ğ Ğ¾Ğ·Ğ´Ñ–Ğ»ĞµĞ½Ğ½Ñ concerns (UI / Logic / Data)
- Reusable components (shadcn/ui)
- Feature flags Ğ´Ğ»Ñ rollout

**Monitoring:**
- Error tracking: Sentry (free tier)
- Analytics: Vercel Analytics
- Logs: Supabase Logs (7 Ğ´Ğ½Ñ–Ğ² Ğ½Ğ° free tier)
- Alerts: ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸ â†’ email

### 4.7 Compatibility

| Platform | Versions | Notes |
|----------|----------|-------|
| **Browsers** |
| Chrome | 90+ | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ (50% UA) |
| Firefox | 88+ | |
| Safari | 14+ | iOS webview |
| Edge | 90+ | |
| **Mobile** |
| iOS | 14+ | Safari WebKit |
| Android | 10+ | Chrome |
| **Screen Sizes** |
| Mobile | 360Ã—640 - 428Ã—926 | |
| Tablet | 768Ã—1024 - 1024Ã—1366 | |
| Desktop | 1280Ã—720+ | |

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** IE11 Ğ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ”Ñ‚ÑŒÑÑ.

---

## 5. System Architecture

### 5.1 Architecture Overview

**Paradigm:** Hybrid (Server-First + Client-Side)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Client (Browser/PWA)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Next.js    â”‚  â”‚  React RSC   â”‚  â”‚ Service      â”‚  â”‚
â”‚  â”‚  App Router  â”‚  â”‚  Components  â”‚  â”‚ Worker       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Zustand    â”‚  â”‚   Context    â”‚  â”‚  IndexedDB   â”‚  â”‚
â”‚  â”‚  (Business)  â”‚  â”‚  (UI/Auth)   â”‚  â”‚  (Offline)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTPS
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Vercel Edge Network (CDN)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Static      â”‚  â”‚  Edge        â”‚  â”‚  Edge        â”‚  â”‚
â”‚  â”‚  Assets      â”‚  â”‚  Functions   â”‚  â”‚  Config      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Next.js Server (Vercel Serverless)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Server     â”‚  â”‚   Server     â”‚  â”‚     API      â”‚  â”‚
â”‚  â”‚  Components  â”‚  â”‚   Actions    â”‚  â”‚    Routes    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Supabase Platform                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Postgres    â”‚  â”‚   Storage    â”‚  â”‚  Realtime    â”‚  â”‚
â”‚  â”‚  Database    â”‚  â”‚   (S3-like)  â”‚  â”‚  (WebSocket) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Auth     â”‚  â”‚    Edge      â”‚  â”‚   Vectors    â”‚  â”‚
â”‚  â”‚  (GoTrue)    â”‚  â”‚  Functions   â”‚  â”‚  (pgvector)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                External Integrations                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Nova Poshta  â”‚  â”‚   SMS        â”‚  â”‚   Email      â”‚  â”‚
â”‚  â”‚     API      â”‚  â”‚  Provider    â”‚  â”‚   SMTP       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Data Flow Patterns

#### 5.2.1 Server-Side Rendering (SSR)

```typescript
// app/dashboard/page.tsx
export default async function DashboardPage() {
  const supabase = createServerClient() // Server Component
  const { data: deals } = await supabase
    .from('deals')
    .select('*')
    .limit(10)
  
  return <DashboardView deals={deals} /> // Hydrated on client
}
```

**Pros:**
- SEO-friendly
- Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ FCP
- Ğ‘ĞµĞ·Ğ¿ĞµĞºĞ° (API keys Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ñ–)

**Cons:**
- ĞĞµ Ğ¿Ñ€Ğ°Ñ†ÑÑ” offline
- Slower TTI

**Use cases:** Landing pages, Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ñ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸, initial load

#### 5.2.2 Client-Side Fetch (CSR)

```typescript
// hooks/useDeals.ts
export function useDeals() {
  const [deals, setDeals] = useState([])
  
  useEffect(() => {
    const supabase = createBrowserClient()
    supabase.from('deals').select('*').then(setDeals)
  }, [])
  
  return deals
}
```

**Pros:**
- Ğ†Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ–ÑÑ‚ÑŒ
- ĞœĞ¾Ğ¶Ğ½Ğ° ĞºĞµÑˆÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ² IndexedDB

**Cons:**
- ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ñ–ÑˆĞµ
- ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±ĞµĞ½ loader

**Use cases:** Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´Ğ¸, Ğ´Ğ¸Ğ½Ğ°Ğ¼Ñ–Ñ‡Ğ½Ñ– ÑĞ¿Ğ¸ÑĞºĞ¸

#### 5.2.3 Server Actions

```typescript
// app/actions/deals.ts
'use server'

export async function createDeal(formData: FormData) {
  const supabase = createServerClient()
  const { data, error } = await supabase
    .from('deals')
    .insert({
      name: formData.get('name'),
      amount: formData.get('amount')
    })
  
  revalidatePath('/dashboard')
  return { data, error }
}

// Client usage
<form action={createDeal}>
  <input name="name" />
  <button type="submit">Create</button>
</form>
```

**Pros:**
- Progressively enhanced
- ĞĞµĞ¼Ğ°Ñ” Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸ Ğ² API endpoints
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ° revalidation

**Cons:**
- Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ´Ğ»Ñ mutations

**Use cases:** Forms, CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ñ—

#### 5.2.4 Realtime Subscriptions

```typescript
useEffect(() => {
  const channel = supabase
    .channel('deals-changes')
    .on('postgres_changes', 
      { event: '*', schema: 'public', table: 'deals' },
      (payload) => {
        // Update local state
        setDeals(prev => [...prev, payload.new])
      }
    )
    .subscribe()
  
  return () => channel.unsubscribe()
}, [])
```

**Use cases:** Collaborative editing, Ğ½Ğ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ—

### 5.3 Offline-First Architecture

#### 5.3.1 Storage Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application State (RAM)        â”‚
â”‚     Zustand + React Context         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ â–²
              â–¼ â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Client Cache (IndexedDB)        â”‚
â”‚   - Entities (contacts, deals)      â”‚
â”‚   - Media (images, files)           â”‚
â”‚   - Queue (pending operations)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ â–²
              â–¼ â”‚ Sync
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Server Database (Postgres)       â”‚
â”‚         Supabase                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.3.2 Sync Strategy

**Optimistic UI:**
```typescript
async function createContact(contact: Contact) {
  // 1. Ğ”Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾)
  const tempId = `temp_${Date.now()}`
  addToLocalDb({ ...contact, id: tempId, _synced: false })
  updateUI(contact)
  
  // 2. Ğ”Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ Ğ² Ñ‡ĞµÑ€Ğ³Ñƒ
  addToSyncQueue({ type: 'create', entity: 'contacts', data: contact })
  
  // 3. ĞĞ°Ğ¼Ğ°Ğ³Ğ°Ñ”Ğ¼Ğ¾ÑÑŒ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚Ğ¸ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ (ÑĞºÑ‰Ğ¾ online)
  if (navigator.onLine) {
    try {
      const { data } = await supabase.from('contacts').insert(contact)
      // 4. ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñƒ Ğ·Ğ°Ğ¿Ğ¸Ñ Ğ· Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¸Ğ¼ ID
      replaceInLocalDb(tempId, data.id)
      removeFromSyncQueue(tempId)
    } catch (error) {
      // Ğ—Ğ°Ğ»Ğ¸ÑˆĞ°Ñ”Ğ¼Ğ¾ Ğ² Ñ‡ĞµÑ€Ğ·Ñ–, ÑĞ¿Ñ€Ğ¾Ğ±ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ñ–Ğ·Ğ½Ñ–ÑˆĞµ
    }
  }
}
```

**Sync Queue:**
```typescript
interface SyncQueueItem {
  id: string
  type: 'create' | 'update' | 'delete'
  entity: 'contacts' | 'deals' | 'tasks' | ...
  data: any
  timestamp: number
  retries: number
}
```

**Sync Process:**
1. ĞŸÑ€Ğ¸ Ğ¿Ğ¾ÑĞ²Ñ– Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ñƒ (online event)
2. ĞšĞ¾Ğ¶Ğ½Ñ– 30 ÑĞµĞº (background sync)
3. ĞŸÑ€Ğ¸ Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ– Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºÑƒ
4. Ğ’Ñ€ÑƒÑ‡Ğ½Ñƒ (pull to refresh)

**Conflict Resolution:**
- Last Write Wins (Ğ·Ğ° Ğ·Ğ°Ğ¼Ğ¾Ğ²Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼)
- Server version wins Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ğ¿Ğ¾Ğ»Ñ–Ğ² (ÑÑƒĞ¼Ğ° ÑƒĞ³Ğ¾Ğ´Ğ¸)
- Manual merge Ğ´Ğ»Ñ ÑĞºĞ»Ğ°Ğ´Ğ½Ğ¸Ñ… ĞºĞ¾Ğ½Ñ„Ğ»Ñ–ĞºÑ‚Ñ–Ğ² (Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚Ğ¸ Ğ¾Ğ±Ğ¸Ğ´Ğ²Ñ– Ğ²ĞµÑ€ÑÑ–Ñ—)

#### 5.3.3 Service Worker Strategy

```typescript
// service-worker.ts
import { precacheAndRoute } from 'workbox-precaching'
import { registerRoute } from 'workbox-routing'
import { NetworkFirst, CacheFirst, StaleWhileRevalidate } from 'workbox-strategies'

// Static assets (HTML, CSS, JS)
precacheAndRoute(self.__WB_MANIFEST)

// API calls: Network First (with fallback to cache)
registerRoute(
  ({ url }) => url.pathname.startsWith('/api/'),
  new NetworkFirst({
    cacheName: 'api-cache',
    networkTimeoutSeconds: 5,
  })
)

// Images: Cache First
registerRoute(
  ({ request }) => request.destination === 'image',
  new CacheFirst({
    cacheName: 'image-cache',
    plugins: [
      new ExpirationPlugin({ maxEntries: 100, maxAgeSeconds: 7 * 24 * 60 * 60 })
    ]
  })
)

// Supabase requests: Stale While Revalidate
registerRoute(
  ({ url }) => url.origin === 'https://your-project.supabase.co',
  new StaleWhileRevalidate({
    cacheName: 'supabase-cache',
  })
)
```

### 5.4 Free Tier Constraints & Workarounds

**Vercel Free Tier:**
- Serverless Functions: 100 GB-Hours/Ğ¼Ñ–Ñ
- Bandwidth: 100 GB/Ğ¼Ñ–Ñ
- Build time: 6000 Ñ…Ğ²/Ğ¼Ñ–Ñ

**ĞĞ±Ñ…Ñ–Ğ´:**
- Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ Edge Functions (Ğ±ĞµĞ·Ğ»Ñ–Ğ¼Ñ–Ñ‚Ğ½Ñ– execution time)
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ images (next/image + WebP)
- CDN caching (aggressive)

**Supabase Free Tier:**
- Database: 500 MB
- Storage: 1 GB
- Bandwidth: 5 GB/Ğ¼Ñ–Ñ
- Monthly Active Users: 50,000
- Concurrent connections: 60

**ĞĞ±Ñ…Ñ–Ğ´:**
- ĞÑ€Ñ…Ñ–Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑÑ‚Ğ°Ñ€Ñ– Ğ´Ğ°Ğ½Ñ– (soft delete + archive table)
- Ğ¡Ñ‚Ğ¸ÑĞºĞ°Ñ‚Ğ¸ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿ĞµÑ€ĞµĞ´ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½ÑĞ¼
- Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ CDN Ğ´Ğ»Ñ Ñ„Ğ°Ğ¹Ğ»Ñ–Ğ² (Cloudflare R2 free tier)
- Connection pooling (Supavisor)

**Ğ—Ğ°Ğ¼Ñ–ÑÑ‚ÑŒ Redis (MVP):**
- Session storage: Supabase Auth (JWT)
- Cache: Vercel Edge Config (1KB free)
- Rate limiting: Edge Middleware + KV (Ğ² Ğ¿Ğ°Ğ¼'ÑÑ‚Ñ–)

**Ğ—Ğ°Ğ¼Ñ–ÑÑ‚ÑŒ RabbitMQ (MVP):**
- Ğ§ĞµÑ€Ğ³Ğ¸: Supabase table `sync_queue`
- Background jobs: Supabase Edge Functions + pg_cron
- Webhooks: Supabase Webhooks (Database Triggers)

```sql
-- Sync queue table
CREATE TABLE sync_queue (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL,
  user_id UUID NOT NULL,
  entity_type TEXT NOT NULL,
  operation TEXT NOT NULL, -- 'create', 'update', 'delete'
  payload JSONB NOT NULL,
  status TEXT DEFAULT 'pending', -- 'pending', 'processing', 'completed', 'failed'
  retries INT DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  processed_at TIMESTAMPTZ
);

-- Cron-like processing (via Edge Function called every minute)
-- Or use pg_cron extension if available
```

### 5.5 Target Architecture (VPS)

**ĞšĞ¾Ğ»Ğ¸ Ğ¼Ñ–Ğ³Ñ€ÑƒĞ²Ğ°Ñ‚Ğ¸:**
- >100 Ğ¿Ğ»Ğ°Ñ‚Ğ½Ğ¸Ñ… ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²
- >$5,000 MRR
- ĞŸĞµÑ€ĞµĞ²Ğ¸Ñ‰ĞµĞ½Ğ½Ñ free tier Ğ»Ñ–Ğ¼Ñ–Ñ‚Ñ–Ğ²

**Stack:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Load Balancer (nginx)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js â”‚                 â”‚ Next.js â”‚
â”‚  Node   â”‚                 â”‚  Node   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Redis               â”‚
    â”‚  - Sessions                 â”‚
    â”‚  - Cache                    â”‚
    â”‚  - Rate limiting            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      PostgreSQL             â”‚
    â”‚  - Master (read/write)      â”‚
    â”‚  - Replica (read-only)      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      RabbitMQ/NATS          â”‚
    â”‚  - Background jobs          â”‚
    â”‚  - Webhooks                 â”‚
    â”‚  - Email queue              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Migration Path:**
1. Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ· Supabase (pg_dump)
2. ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ VPS (Docker Compose)
3. Ğ†Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ´Ğ°Ğ½Ğ¸Ñ…
4. ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ env vars
5. DNS switch (zero downtime Ğ· blue-green deployment)

---

## 6. Data Model (Postgres)

### 6.1 Core Schema

#### 6.1.1 Multi-tenancy

```sql
-- Workspaces (ĞÑ€Ğ³Ğ°Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—)
CREATE TABLE workspaces (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL, -- Ğ´Ğ»Ñ URL: crm.app/w/{slug}
  owner_id UUID NOT NULL REFERENCES auth.users(id),
  settings JSONB DEFAULT '{}', -- Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ğ¾Ñ€Ğ¾Ğ½Ğ¾Ğº, Ğ¿Ğ¾Ğ»Ñ–Ğ², Ñ‚Ğ¾Ñ‰Ğ¾
  subscription_tier TEXT DEFAULT 'free', -- 'free', 'starter', 'pro', 'enterprise'
  subscription_status TEXT DEFAULT 'active', -- 'active', 'past_due', 'cancelled'
  trial_ends_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– workspace
CREATE TABLE workspace_users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  role TEXT NOT NULL, -- 'owner', 'admin', 'manager', 'user', 'guest'
  invited_by UUID REFERENCES auth.users(id),
  invited_at TIMESTAMPTZ DEFAULT NOW(),
  joined_at TIMESTAMPTZ,
  status TEXT DEFAULT 'pending', -- 'pending', 'active', 'suspended'
  UNIQUE(workspace_id, user_id)
);

CREATE INDEX idx_workspace_users_workspace ON workspace_users(workspace_id);
CREATE INDEX idx_workspace_users_user ON workspace_users(user_id);
```

#### 6.1.2 Contacts & Companies

```sql
-- ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ—
CREATE TABLE companies (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  legal_name TEXT,
  edrpou TEXT, -- Ğ„Ğ”Ğ ĞŸĞĞ£/Ğ†ĞŸĞ
  website TEXT,
  industry TEXT,
  employees_count INT,
  annual_revenue NUMERIC(15,2),
  
  -- Addresses (JSONB Ğ´Ğ»Ñ Ğ³Ğ½ÑƒÑ‡ĞºĞ¾ÑÑ‚Ñ–)
  addresses JSONB DEFAULT '[]', -- [{type: 'legal', country, city, street, zip}, ...]
  
  -- Contact info
  phone TEXT,
  email TEXT,
  
  -- CRM fields
  status TEXT DEFAULT 'active', -- 'lead', 'active', 'inactive'
  tags TEXT[] DEFAULT '{}',
  source TEXT, -- 'website', 'referral', 'cold_call', ...
  owner_id UUID REFERENCES auth.users(id),
  
  -- Custom fields
  custom_fields JSONB DEFAULT '{}',
  
  -- Meta
  created_by UUID REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ -- Soft delete
);

-- ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¸ (Ñ„Ñ–Ğ·Ğ¸Ñ‡Ğ½Ñ– Ğ¾ÑĞ¾Ğ±Ğ¸)
CREATE TABLE contacts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  company_id UUID REFERENCES companies(id) ON DELETE SET NULL,
  
  -- Personal info
  first_name TEXT NOT NULL,
  last_name TEXT NOT NULL,
  middle_name TEXT,
  full_name TEXT GENERATED ALWAYS AS (
    first_name || ' ' || last_name || COALESCE(' ' || middle_name, '')
  ) STORED,
  
  -- Contact details
  phones JSONB DEFAULT '[]', -- [{type: 'mobile', number: '+380...', primary: true}, ...]
  emails JSONB DEFAULT '[]',
  
  -- Job info
  position TEXT,
  department TEXT,
  
  -- CRM fields
  status TEXT DEFAULT 'new', -- 'new', 'qualified', 'customer', 'lost'
  tags TEXT[] DEFAULT '{}',
  source TEXT,
  owner_id UUID REFERENCES auth.users(id),
  
  -- Social
  social_profiles JSONB DEFAULT '{}', -- {linkedin: '...', facebook: '...'}
  
  -- Custom fields
  custom_fields JSONB DEFAULT '{}',
  
  -- Meta
  created_by UUID REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);

-- Full-text search
CREATE INDEX idx_companies_search ON companies USING GIN(
  to_tsvector('simple', name || ' ' || COALESCE(legal_name, '') || ' ' || COALESCE(edrpou, ''))
);

CREATE INDEX idx_contacts_search ON contacts USING GIN(
  to_tsvector('simple', full_name || ' ' || COALESCE(position, ''))
);

CREATE INDEX idx_contacts_workspace ON contacts(workspace_id) WHERE deleted_at IS NULL;
CREATE INDEX idx_companies_workspace ON companies(workspace_id) WHERE deleted_at IS NULL;
CREATE INDEX idx_contacts_owner ON contacts(owner_id) WHERE deleted_at IS NULL;
```

#### 6.1.3 Deals & Pipeline

```sql
-- Ğ’Ğ¾Ñ€Ğ¾Ğ½ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ñ–Ğ²
CREATE TABLE pipelines (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  is_default BOOLEAN DEFAULT FALSE,
  stages JSONB NOT NULL, -- [{id, name, order, probability, color}, ...]
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ğ£Ğ³Ğ¾Ğ´Ğ¸
CREATE TABLE deals (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  pipeline_id UUID NOT NULL REFERENCES pipelines(id),
  stage_id TEXT NOT NULL, -- ID ĞµÑ‚Ğ°Ğ¿Ñƒ Ğ· pipelines.stages
  
  -- Basic info
  title TEXT NOT NULL,
  amount NUMERIC(15,2) NOT NULL DEFAULT 0,
  currency TEXT DEFAULT 'UAH', -- 'UAH', 'USD', 'EUR'
  probability INT DEFAULT 50, -- 0-100
  
  -- Relations
  contact_id UUID REFERENCES contacts(id) ON DELETE SET NULL,
  company_id UUID REFERENCES companies(id) ON DELETE SET NULL,
  owner_id UUID NOT NULL REFERENCES auth.users(id),
  
  -- Dates
  expected_close_date DATE,
  actual_close_date DATE,
  
  -- Status
  status TEXT DEFAULT 'open', -- 'open', 'won', 'lost'
  lost_reason TEXT,
  
  -- Additional
  tags TEXT[] DEFAULT '{}',
  source TEXT,
  custom_fields JSONB DEFAULT '{}',
  
  -- Meta
  created_by UUID REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);

-- ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸ Ğ² ÑƒĞ³Ğ¾Ğ´Ñ– (Ğ±Ğ°Ğ³Ğ°Ñ‚Ğ¾ Ğ´Ğ¾ Ğ±Ğ°Ğ³Ğ°Ñ‚ÑŒĞ¾Ñ…)
CREATE TABLE deal_products (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  deal_id UUID NOT NULL REFERENCES deals(id) ON DELETE CASCADE,
  product_id UUID NOT NULL REFERENCES products(id) ON DELETE RESTRICT,
  quantity NUMERIC(10,2) NOT NULL DEFAULT 1,
  price NUMERIC(15,2) NOT NULL, -- Ğ¦Ñ–Ğ½Ğ° Ğ½Ğ° Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ
  discount NUMERIC(5,2) DEFAULT 0, -- Ğ—Ğ½Ğ¸Ğ¶ĞºĞ° %
  total NUMERIC(15,2) GENERATED ALWAYS AS (
    quantity * price * (1 - discount / 100)
  ) STORED,
  notes TEXT
);

-- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ¿ĞµÑ€ĞµĞ¼Ñ–Ñ‰ĞµĞ½ÑŒ Ğ¿Ğ¾ ĞµÑ‚Ğ°Ğ¿Ğ°Ñ…
CREATE TABLE deal_stage_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  deal_id UUID NOT NULL REFERENCES deals(id) ON DELETE CASCADE,
  from_stage_id TEXT,
  to_stage_id TEXT NOT NULL,
  user_id UUID NOT NULL REFERENCES auth.users(id),
  duration_seconds INT, -- Ğ§Ğ°Ñ Ğ½Ğ° Ğ¿Ğ¾Ğ¿ĞµÑ€ĞµĞ´Ğ½ÑŒĞ¾Ğ¼Ñƒ ĞµÑ‚Ğ°Ğ¿Ñ–
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_deals_workspace ON deals(workspace_id) WHERE deleted_at IS NULL;
CREATE INDEX idx_deals_stage ON deals(stage_id) WHERE status = 'open';
CREATE INDEX idx_deals_owner ON deals(owner_id);
CREATE INDEX idx_deals_expected_close ON deals(expected_close_date) WHERE status = 'open';
```

#### 6.1.4 Tasks

```sql
CREATE TABLE tasks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  
  -- Task details
  title TEXT NOT NULL,
  description TEXT,
  task_type TEXT NOT NULL, -- 'call', 'meeting', 'email', 'todo'
  
  -- Assignment
  created_by UUID NOT NULL REFERENCES auth.users(id),
  assigned_to UUID NOT NULL REFERENCES auth.users(id),
  
  -- Status
  status TEXT DEFAULT 'pending', -- 'pending', 'in_progress', 'completed', 'cancelled'
  priority TEXT DEFAULT 'medium', -- 'low', 'medium', 'high'
  
  -- Timing
  due_date TIMESTAMPTZ NOT NULL,
  completed_at TIMESTAMPTZ,
  
  -- Relations
  contact_id UUID REFERENCES contacts(id) ON DELETE CASCADE,
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
  deal_id UUID REFERENCES deals(id) ON DELETE CASCADE,
  
  -- Result
  result TEXT, -- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ñ–ÑĞ»Ñ Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ½Ñ
  
  -- Reminders
  reminders JSONB DEFAULT '[]', -- [{time: '15m', sent: false}, ...]
  
  -- Meta
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);

CREATE INDEX idx_tasks_assigned ON tasks(assigned_to, due_date) WHERE status != 'completed';
CREATE INDEX idx_tasks_workspace ON tasks(workspace_id) WHERE deleted_at IS NULL;
CREATE INDEX idx_tasks_due ON tasks(due_date) WHERE status = 'pending';
```

#### 6.1.5 Products

```sql
-- ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ— Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ–Ğ² (Ñ–Ñ”Ñ€Ğ°Ñ€Ñ…Ñ–Ñ‡Ğ½Ñ–)
CREATE TABLE product_categories (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  parent_id UUID REFERENCES product_categories(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  slug TEXT NOT NULL,
  order_index INT DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸/ĞŸĞ¾ÑĞ»ÑƒĞ³Ğ¸
CREATE TABLE products (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  category_id UUID REFERENCES product_categories(id) ON DELETE SET NULL,
  
  -- Product info
  name TEXT NOT NULL,
  sku TEXT, -- ĞÑ€Ñ‚Ğ¸ĞºÑƒĞ»
  description TEXT,
  
  -- Pricing
  price NUMERIC(15,2) NOT NULL,
  cost NUMERIC(15,2), -- Ğ¡Ğ¾Ğ±Ñ–Ğ²Ğ°Ñ€Ñ‚Ñ–ÑÑ‚ÑŒ
  currency TEXT DEFAULT 'UAH',
  
  -- Inventory (Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  unit TEXT DEFAULT 'ÑˆÑ‚', -- 'ÑˆÑ‚', 'ĞºĞ³', 'Ğ»', 'Ğ³Ğ¾Ğ´', 'Ğ¼2'
  track_inventory BOOLEAN DEFAULT FALSE,
  stock_quantity INT DEFAULT 0,
  
  -- Status
  is_active BOOLEAN DEFAULT TRUE,
  
  -- Custom fields
  custom_fields JSONB DEFAULT '{}',
  
  -- Meta
  created_by UUID REFERENCES auth.users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);

-- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ·Ğ¼Ñ–Ğ½ Ñ†Ñ–Ğ½Ğ¸ (Ğ´Ğ»Ñ Ğ°ÑƒĞ´Ğ¸Ñ‚Ñƒ)
CREATE TABLE product_price_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  product_id UUID NOT NULL REFERENCES products(id) ON DELETE CASCADE,
  old_price NUMERIC(15,2),
  new_price NUMERIC(15,2) NOT NULL,
  changed_by UUID REFERENCES auth.users(id),
  changed_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_products_workspace ON products(workspace_id) WHERE is_active = TRUE;
CREATE INDEX idx_products_sku ON products(sku) WHERE sku IS NOT NULL;
```

#### 6.1.6 Activity Timeline (Interactions)

```sql
-- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ²Ğ·Ğ°Ñ”Ğ¼Ğ¾Ğ´Ñ–Ğ¹ (ÑƒĞ½Ñ–Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ)
CREATE TABLE activities (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  
  -- Type
  activity_type TEXT NOT NULL, -- 'note', 'call', 'email', 'meeting', 'status_change', 'file_upload'
  
  -- Content
  subject TEXT,
  content TEXT,
  metadata JSONB DEFAULT '{}', -- Ğ”Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ– Ğ´Ğ°Ğ½Ñ– Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ Ğ²Ñ–Ğ´ Ñ‚Ğ¸Ğ¿Ñƒ
  
  -- Relations (nullable Ğ´Ğ»Ñ Ğ³Ğ½ÑƒÑ‡ĞºĞ¾ÑÑ‚Ñ–)
  contact_id UUID REFERENCES contacts(id) ON DELETE CASCADE,
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
  deal_id UUID REFERENCES deals(id) ON DELETE CASCADE,
  task_id UUID REFERENCES tasks(id) ON DELETE CASCADE,
  
  -- User
  user_id UUID NOT NULL REFERENCES auth.users(id),
  
  -- Timing
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_activities_contact ON activities(contact_id, created_at DESC);
CREATE INDEX idx_activities_company ON activities(company_id, created_at DESC);
CREATE INDEX idx_activities_deal ON activities(deal_id, created_at DESC);
CREATE INDEX idx_activities_type ON activities(activity_type, created_at DESC);
```

#### 6.1.7 Files & Attachments

```sql
CREATE TABLE files (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  
  -- File info
  name TEXT NOT NULL,
  original_name TEXT NOT NULL,
  size_bytes BIGINT NOT NULL,
  mime_type TEXT NOT NULL,
  storage_path TEXT NOT NULL, -- Path in Supabase Storage
  
  -- Relations (nullable)
  contact_id UUID REFERENCES contacts(id) ON DELETE CASCADE,
  company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
  deal_id UUID REFERENCES deals(id) ON DELETE CASCADE,
  task_id UUID REFERENCES tasks(id) ON DELETE CASCADE,
  
  -- Meta
  uploaded_by UUID NOT NULL REFERENCES auth.users(id),
  uploaded_at TIMESTAMPTZ DEFAULT NOW(),
  deleted_at TIMESTAMPTZ
);

CREATE INDEX idx_files_workspace ON files(workspace_id);
CREATE INDEX idx_files_contact ON files(contact_id) WHERE deleted_at IS NULL;
```

#### 6.1.8 Notifications

```sql
CREATE TABLE notifications (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- Notification
  type TEXT NOT NULL, -- 'task_due', 'deal_stage_changed', 'mention', 'assigned'
  title TEXT NOT NULL,
  message TEXT,
  link TEXT, -- URL Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñƒ
  
  -- Status
  is_read BOOLEAN DEFAULT FALSE,
  read_at TIMESTAMPTZ,
  
  -- Meta
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_notifications_user ON notifications(user_id, created_at DESC) WHERE is_read = FALSE;
```

### 6.2 Row Level Security (RLS)

**ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ:** Ğ’ÑÑ– Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ– Ğ¿Ğ¾Ğ²Ğ¸Ğ½Ğ½Ñ– Ğ¼Ğ°Ñ‚Ğ¸ RLS Ğ¿Ğ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸.

```sql
-- Enable RLS Ğ½Ğ° Ğ²ÑÑ–Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑÑ…
ALTER TABLE workspaces ENABLE ROW LEVEL SECURITY;
ALTER TABLE workspace_users ENABLE ROW LEVEL SECURITY;
ALTER TABLE contacts ENABLE ROW LEVEL SECURITY;
-- ... Ñ– Ñ‚Ğ°Ğº Ğ´Ğ°Ğ»Ñ– Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ

-- Helper function: Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸ workspace_ids ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°
CREATE OR REPLACE FUNCTION auth.user_workspaces(user_id UUID)
RETURNS TABLE(workspace_id UUID, role TEXT) AS $$
  SELECT workspace_id, role 
  FROM workspace_users 
  WHERE user_id = $1 AND status = 'active'
$$ LANGUAGE SQL STABLE;

-- ĞŸĞ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° Ğ´Ğ»Ñ contacts (Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´)
CREATE POLICY "Users can view contacts in their workspaces"
ON contacts FOR SELECT
USING (
  workspace_id IN (
    SELECT workspace_id FROM auth.user_workspaces(auth.uid())
  )
);

CREATE POLICY "Users can insert contacts in their workspaces"
ON contacts FOR INSERT
WITH CHECK (
  workspace_id IN (
    SELECT workspace_id FROM auth.user_workspaces(auth.uid())
  )
);

CREATE POLICY "Users can update contacts in their workspaces"
ON contacts FOR UPDATE
USING (
  workspace_id IN (
    SELECT workspace_id FROM auth.user_workspaces(auth.uid())
  )
);

-- ĞŸĞ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ñ– (Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ Ğ²Ñ–Ğ´ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½ÑŒ)
CREATE POLICY "Users see contacts based on visibility settings"
ON contacts FOR SELECT
USING (
  workspace_id IN (SELECT workspace_id FROM auth.user_workspaces(auth.uid()))
  AND (
    -- Owner/Admin/Manager Ğ±Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ²ÑĞµ
    (SELECT role FROM auth.user_workspaces(auth.uid()) WHERE workspace_id = contacts.workspace_id) IN ('owner', 'admin', 'manager')
    OR
    -- User Ğ±Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ ÑĞ²Ğ¾Ñ— Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
    owner_id = auth.uid()
  )
);
```

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** RLS Ğ¿Ğ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸ Ğ¼Ğ°ÑÑ‚ÑŒ Ğ±ÑƒÑ‚Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ñ– Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ¾.

### 6.3 Database Triggers & Functions

```sql
-- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ updated_at
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_contacts_updated_at BEFORE UPDATE ON contacts
  FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- Ğ—Ğ°ÑÑ‚Ğ¾ÑÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ´Ğ¾ Ğ²ÑÑ–Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ Ğ· updated_at

-- Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ñ– Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ ÑƒĞ³Ğ¾Ğ´Ğ¸
CREATE OR REPLACE FUNCTION log_deal_status_change()
RETURNS TRIGGER AS $$
BEGIN
  IF OLD.status != NEW.status THEN
    INSERT INTO activities (
      workspace_id,
      activity_type,
      subject,
      content,
      deal_id,
      user_id,
      metadata
    ) VALUES (
      NEW.workspace_id,
      'status_change',
      'Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑƒĞ³Ğ¾Ğ´Ğ¸ Ğ·Ğ¼Ñ–Ğ½ĞµĞ½Ğ¾',
      'Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ·Ğ¼Ñ–Ğ½ĞµĞ½Ğ¾ Ğ· "' || OLD.status || '" Ğ½Ğ° "' || NEW.status || '"',
      NEW.id,
      auth.uid(),
      jsonb_build_object('old_status', OLD.status, 'new_status', NEW.status)
    );
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER deal_status_change_trigger AFTER UPDATE ON deals
  FOR EACH ROW EXECUTE FUNCTION log_deal_status_change();

-- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ ÑÑƒĞ¼Ğ¸ ÑƒĞ³Ğ¾Ğ´Ğ¸ Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ–Ğ²
CREATE OR REPLACE FUNCTION update_deal_amount()
RETURNS TRIGGER AS $$
BEGIN
  UPDATE deals 
  SET amount = (
    SELECT COALESCE(SUM(total), 0) 
    FROM deal_products 
    WHERE deal_id = NEW.deal_id
  )
  WHERE id = NEW.deal_id;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_deal_amount_trigger 
  AFTER INSERT OR UPDATE OR DELETE ON deal_products
  FOR EACH ROW EXECUTE FUNCTION update_deal_amount();
```

### 6.4 Indexes Strategy

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** Ğ†Ğ½Ğ´ĞµĞºÑĞ¸ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑÑ‚ÑŒÑÑ Ğ´Ğ»Ñ:
1. Foreign keys (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾)
2. ĞŸĞ¾Ğ»Ñ Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— (status, tags, dates)
3. ĞŸĞ¾Ğ»Ñ Ğ´Ğ»Ñ ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ (created_at, name)
4. Full-text search (GIN indexes)
5. JSONB Ğ¿Ğ¾Ğ»Ñ (GIN indexes Ğ´Ğ»Ñ custom_fields)

```sql
-- ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ JSONB Ñ–Ğ½Ğ´ĞµĞºÑĞ°
CREATE INDEX idx_contacts_custom_fields ON contacts USING GIN (custom_fields);

-- Partial index Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸ÑÑ–Ğ²
CREATE INDEX idx_contacts_active ON contacts(workspace_id) WHERE deleted_at IS NULL;

-- Composite index Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ğ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²
CREATE INDEX idx_deals_workspace_status ON deals(workspace_id, status, created_at DESC);
```

### 6.5 Data Retention & Archival

**Soft Delete:**
- Ğ’ÑÑ– Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ– Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ– Ğ¼Ğ°ÑÑ‚ÑŒ `deleted_at TIMESTAMPTZ`
- ĞŸÑ€Ğ¸ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ–: `UPDATE ... SET deleted_at = NOW()`
- QuerÑ– Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ğ· `WHERE deleted_at IS NULL`

**Hard Delete (Ğ°Ñ€Ñ…Ñ–Ğ²ÑƒĞ²Ğ°Ğ½Ğ½Ñ):**
```sql
-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ğ´Ğ»Ñ Ğ°Ñ€Ñ…Ñ–Ğ²Ñƒ
CREATE TABLE archived_contacts (
  LIKE contacts INCLUDING ALL
);

-- Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ñ Ğ°Ñ€Ñ…Ñ–Ğ²ÑƒĞ²Ğ°Ğ½Ğ½Ñ (Ğ²Ğ¸ĞºĞ¾Ğ½ÑƒÑ”Ñ‚ÑŒÑÑ Ñ€Ğ°Ğ· Ğ½Ğ° Ğ¼Ñ–ÑÑÑ†ÑŒ)
CREATE OR REPLACE FUNCTION archive_old_deleted_records()
RETURNS void AS $$
BEGIN
  -- ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ¸Ğ¼Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ ÑÑ‚Ğ°Ñ€ÑˆĞµ 6 Ğ¼Ñ–ÑÑÑ†Ñ–Ğ² Ğ¿Ñ–ÑĞ»Ñ soft delete
  INSERT INTO archived_contacts
  SELECT * FROM contacts 
  WHERE deleted_at < NOW() - INTERVAL '6 months';
  
  DELETE FROM contacts 
  WHERE deleted_at < NOW() - INTERVAL '6 months';
END;
$$ LANGUAGE plpgsql;

-- Ğ’Ğ¸ĞºĞ»Ğ¸Ğº Ñ‡ĞµÑ€ĞµĞ· pg_cron Ğ°Ğ±Ğ¾ Edge Function
```

---

## 7. API Design

### 7.1 API Architecture

**ĞŸÑ–Ğ´Ñ…Ñ–Ğ´:** Next.js App Router (Server Actions + API Routes)

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°:**
```
app/
â”œâ”€â”€ api/                    # REST API endpoints (Ğ´Ğ»Ñ Ğ·Ğ¾Ğ²Ğ½Ñ–ÑˆĞ½Ñ–Ñ… Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ğ¹)
â”‚   â”œâ”€â”€ webhooks/
â”‚   â”‚   â””â”€â”€ nova-poshta/
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â””â”€â”€ public/            # Public API (Ğ´Ğ»Ñ Ğ¼Ğ°Ğ¹Ğ±ÑƒÑ‚Ğ½ÑŒĞ¾Ğ³Ğ¾)
â”‚       â””â”€â”€ v1/
â”‚           â””â”€â”€ contacts/
â”‚               â””â”€â”€ route.ts
â”œâ”€â”€ actions/               # Server Actions (Ğ´Ğ»Ñ internal use)
â”‚   â”œâ”€â”€ contacts.ts
â”‚   â”œâ”€â”€ deals.ts
â”‚   â”œâ”€â”€ tasks.ts
â”‚   â””â”€â”€ ...
â””â”€â”€ (dashboard)/           # Protected routes
    â””â”€â”€ ...
```

### 7.2 Server Actions (Internal API)

**ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: Contacts CRUD**

```typescript
// app/actions/contacts.ts
'use server'

import { createServerClient } from '@/lib/supabase/server'
import { revalidatePath } from 'next/cache'
import { z } from 'zod'

// Validation schema
const contactSchema = z.object({
  first_name: z.string().min(1, 'ĞĞ±Ğ¾Ğ²\'ÑĞ·ĞºĞ¾Ğ²Ğµ Ğ¿Ğ¾Ğ»Ğµ'),
  last_name: z.string().min(1, 'ĞĞ±Ğ¾Ğ²\'ÑĞ·ĞºĞ¾Ğ²Ğµ Ğ¿Ğ¾Ğ»Ğµ'),
  middle_name: z.string().optional(),
  phones: z.array(z.object({
    type: z.enum(['mobile', 'work', 'home']),
    number: z.string().regex(/^\+380\d{9}$/, 'ĞĞµĞ²Ñ–Ñ€Ğ½Ğ¸Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚'),
    primary: z.boolean()
  })).min(1),
  emails: z.array(z.object({
    type: z.enum(['work', 'personal']),
    email: z.string().email(),
    primary: z.boolean()
  })).optional(),
  company_id: z.string().uuid().optional(),
  position: z.string().optional(),
  tags: z.array(z.string()).optional(),
  source: z.string().optional(),
  owner_id: z.string().uuid().optional(),
  custom_fields: z.record(z.any()).optional()
})

export type ContactInput = z.infer<typeof contactSchema>

export async function createContact(data: ContactInput) {
  try {
    // Ğ’Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ñ
    const validated = contactSchema.parse(data)
    
    // Supabase client
    const supabase = createServerClient()
    
    // ĞÑ‚Ñ€Ğ¸Ğ¼ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°
    const { data: { user }, error: authError } = await supabase.auth.getUser()
    if (authError || !user) {
      return { success: false, error: 'Unauthorized' }
    }
    
    // ĞÑ‚Ñ€Ğ¸Ğ¼ÑƒÑ”Ğ¼Ğ¾ workspace_id ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°
    const { data: workspace } = await supabase
      .from('workspace_users')
      .select('workspace_id')
      .eq('user_id', user.id)
      .single()
    
    if (!workspace) {
      return { success: false, error: 'Workspace not found' }
    }
    
    // Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ”Ğ¼Ğ¾ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚
    const { data: contact, error } = await supabase
      .from('contacts')
      .insert({
        ...validated,
        workspace_id: workspace.workspace_id,
        created_by: user.id,
        owner_id: validated.owner_id || user.id
      })
      .select()
      .single()
    
    if (error) {
      console.error('Error creating contact:', error)
      return { success: false, error: error.message }
    }
    
    // Revalidate cache
    revalidatePath('/dashboard/contacts')
    
    // Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ”Ğ¼Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ–ÑÑ‚ÑŒ
    await supabase.from('activities').insert({
      workspace_id: workspace.workspace_id,
      activity_type: 'note',
      subject: 'ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾',
      content: `Ğ¡Ñ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾ Ğ½Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚: ${validated.first_name} ${validated.last_name}`,
      contact_id: contact.id,
      user_id: user.id
    })
    
    return { success: true, data: contact }
  } catch (error) {
    if (error instanceof z.ZodError) {
      return { success: false, error: error.errors[0].message }
    }
    return { success: false, error: 'Internal server error' }
  }
}

export async function updateContact(id: string, data: Partial<ContactInput>) {
  // ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ° Ğ»Ğ¾Ğ³Ñ–ĞºĞ°
}

export async function deleteContact(id: string) {
  const supabase = createServerClient()
  
  // Soft delete
  const { error } = await supabase
    .from('contacts')
    .update({ deleted_at: new Date().toISOString() })
    .eq('id', id)
  
  if (error) {
    return { success: false, error: error.message }
  }
  
  revalidatePath('/dashboard/contacts')
  return { success: true }
}

export async function getContacts(filters?: {
  status?: string
  tags?: string[]
  owner_id?: string
  search?: string
}) {
  const supabase = createServerClient()
  
  let query = supabase
    .from('contacts')
    .select('*, company:companies(id, name)')
    .is('deleted_at', null)
    .order('created_at', { ascending: false })
  
  if (filters?.status) {
    query = query.eq('status', filters.status)
  }
  
  if (filters?.tags && filters.tags.length > 0) {
    query = query.contains('tags', filters.tags)
  }
  
  if (filters?.owner_id) {
    query = query.eq('owner_id', filters.owner_id)
  }
  
  if (filters?.search) {
    // Full-text search
    query = query.textSearch('full_name', filters.search, {
      type: 'websearch',
      config: 'simple'
    })
  }
  
  const { data, error } = await query
  
  if (error) {
    return { success: false, error: error.message }
  }
  
  return { success: true, data }
}
```

### 7.3 REST API (Ğ´Ğ»Ñ Ğ·Ğ¾Ğ²Ğ½Ñ–ÑˆĞ½Ñ–Ñ… Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ğ¹)

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** REST API Ğ±ÑƒĞ´Ğµ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±ĞµĞ½ Ğ´Ğ»Ñ:
- Webhooks (ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ°, Ğ¿Ğ»Ğ°Ñ‚Ñ–Ğ¶Ğ½Ñ– ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸)
- ĞœĞ°Ğ¹Ğ±ÑƒÑ‚Ğ½Ñ–Ğ¹ Ğ¿ÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ğ¹ API
- Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ— Ğ· Ñ‚Ñ€ĞµÑ‚Ñ–Ğ¼Ğ¸ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°Ğ¼Ğ¸

```typescript
// app/api/webhooks/nova-poshta/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { createClient } from '@supabase/supabase-js'

// Webhook Ğ´Ğ»Ñ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑÑƒ Ğ¢Ğ¢Ğ
export async function POST(request: NextRequest) {
  try {
    // Verify signature (Nova Poshta webhook)
    const signature = request.headers.get('x-np-signature')
    // ... Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑÑƒ
    
    const body = await request.json()
    
    const supabase = createClient(
      process.env.SUPABASE_URL!,
      process.env.SUPABASE_SERVICE_KEY! // Service role key
    )
    
    // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ² ÑƒĞ³Ğ¾Ğ´Ñ–
    const { data: deal } = await supabase
      .from('deals')
      .update({
        custom_fields: {
          ...body.custom_fields,
          np_status: body.status,
          np_tracking: body.tracking_number
        }
      })
      .eq('custom_fields->np_ttn', body.ttn_number)
      .select()
      .single()
    
    if (deal) {
      // Ğ¡Ñ‚Ğ²Ğ¾Ñ€ÑÑ”Ğ¼Ğ¾ Ğ½Ğ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ
      await supabase.from('notifications').insert({
        workspace_id: deal.workspace_id,
        user_id: deal.owner_id,
        type: 'delivery_update',
        title: 'ĞĞ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸',
        message: `Ğ¢Ğ¢Ğ ${body.ttn_number}: ${body.status}`,
        link: `/dashboard/deals/${deal.id}`
      })
    }
    
    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Nova Poshta webhook error:', error)
    return NextResponse.json(
      { success: false, error: 'Internal server error' },
      { status: 500 }
    )
  }
}
```

### 7.4 Realtime Subscriptions

```typescript
// hooks/useRealtimeDeals.ts
import { useEffect } from 'react'
import { createBrowserClient } from '@/lib/supabase/client'
import { useDealsStore } from '@/stores/deals'

export function useRealtimeDeals(workspaceId: string) {
  const { addDeal, updateDeal, removeDeal } = useDealsStore()
  
  useEffect(() => {
    const supabase = createBrowserClient()
    
    const channel = supabase
      .channel('deals-changes')
      .on(
        'postgres_changes',
        {
          event: 'INSERT',
          schema: 'public',
          table: 'deals',
          filter: `workspace_id=eq.${workspaceId}`
        },
        (payload) => {
          addDeal(payload.new)
        }
      )
      .on(
        'postgres_changes',
        {
          event: 'UPDATE',
          schema: 'public',
          table: 'deals',
          filter: `workspace_id=eq.${workspaceId}`
        },
        (payload) => {
          updateDeal(payload.new.id, payload.new)
        }
      )
      .on(
        'postgres_changes',
        {
          event: 'DELETE',
          schema: 'public',
          table: 'deals',
          filter: `workspace_id=eq.${workspaceId}`
        },
        (payload) => {
          removeDeal(payload.old.id)
        }
      )
      .subscribe()
    
    return () => {
      channel.unsubscribe()
    }
  }, [workspaceId])
}
```

### 7.5 Error Handling

**Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¸Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ–:**

```typescript
type ApiResponse<T> = 
  | { success: true; data: T }
  | { success: false; error: string; code?: string }
```

**Error codes:**
```typescript
const ErrorCodes = {
  UNAUTHORIZED: 'unauthorized',
  FORBIDDEN: 'forbidden',
  NOT_FOUND: 'not_found',
  VALIDATION_ERROR: 'validation_error',
  WORKSPACE_LIMIT: 'workspace_limit_exceeded',
  SUBSCRIPTION_REQUIRED: 'subscription_required',
  RATE_LIMIT: 'rate_limit_exceeded',
  INTERNAL_ERROR: 'internal_error'
}
```

### 7.6 Rate Limiting

**Middleware:**
```typescript
// middleware.ts
import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

// In-memory rate limiter (Ğ´Ğ»Ñ MVP)
const rateLimitMap = new Map<string, { count: number; resetAt: number }>()

const RATE_LIMIT = 100 // requests
const WINDOW_MS = 60 * 1000 // 1 minute

export function middleware(request: NextRequest) {
  const ip = request.ip || 'anonymous'
  const now = Date.now()
  
  const userLimit = rateLimitMap.get(ip)
  
  if (!userLimit || now > userLimit.resetAt) {
    rateLimitMap.set(ip, { count: 1, resetAt: now + WINDOW_MS })
  } else if (userLimit.count >= RATE_LIMIT) {
    return NextResponse.json(
      { success: false, error: 'Too many requests' },
      { status: 429 }
    )
  } else {
    userLimit.count++
  }
  
  return NextResponse.next()
}

export const config = {
  matcher: '/api/:path*'
}
```

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** ĞĞ° VPS rate limiting Ğ±ÑƒĞ´Ğµ Ñ‡ĞµÑ€ĞµĞ· Redis.

---

## 8. Subscription & Billing Model

### 8.1 Pricing Tiers

| Tier | Price (UAH/Ğ¼Ñ–Ñ) | Users | Contacts | Deals | Storage | Support |
|------|-----------------|-------|----------|-------|---------|---------|
| **Free** | 0 | 2 | 100 | 50 | 500 MB | Community |
| **Starter** | 299 | 5 | 5,000 | 1,000 | 5 GB | Email (48h) |
| **Pro** | 799 | 20 | 50,000 | 10,000 | 50 GB | Email (24h) + Chat |
| **Enterprise** | Custom | Unlimited | Unlimited | Unlimited | Unlimited | Priority + Phone + Onboarding |

**Ğ”Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ñ– Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ– (Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ–):**
- Email-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ: +99 Ğ³Ñ€Ğ½/Ğ¼Ñ–Ñ
- SMS (100 ÑˆÑ‚): +150 Ğ³Ñ€Ğ½
- ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ° (Ğ±ĞµĞ·Ğ»Ñ–Ğ¼Ñ–Ñ‚Ğ½Ñ– Ğ¢Ğ¢Ğ): +199 Ğ³Ñ€Ğ½/Ğ¼Ñ–Ñ
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ workflows: +299 Ğ³Ñ€Ğ½/Ğ¼Ñ–Ñ
- API Ğ´Ğ¾ÑÑ‚ÑƒĞ¿: +399 Ğ³Ñ€Ğ½/Ğ¼Ñ–Ñ
- White-label: +2,999 Ğ³Ñ€Ğ½/Ğ¼Ñ–Ñ

### 8.2 Quota Management

```sql
-- ĞšĞ²Ğ¾Ñ‚Ğ¸ Ğ² Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½ÑÑ… workspace
CREATE TABLE workspace_quotas (
  workspace_id UUID PRIMARY KEY REFERENCES workspaces(id),
  max_users INT NOT NULL DEFAULT 2,
  max_contacts INT NOT NULL DEFAULT 100,
  max_deals INT NOT NULL DEFAULT 50,
  max_storage_mb INT NOT NULL DEFAULT 500,
  max_api_calls INT NOT NULL DEFAULT 1000,
  
  -- Current usage
  current_users INT DEFAULT 0,
  current_contacts INT DEFAULT 0,
  current_deals INT DEFAULT 0,
  current_storage_mb NUMERIC(10,2) DEFAULT 0,
  current_api_calls INT DEFAULT 0,
  
  -- Reset dates
  api_calls_reset_at TIMESTAMPTZ DEFAULT NOW() + INTERVAL '1 month',
  
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Trigger Ğ´Ğ»Ñ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ğ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
CREATE OR REPLACE FUNCTION update_workspace_usage()
RETURNS TRIGGER AS $$
BEGIN
  IF TG_TABLE_NAME = 'contacts' THEN
    IF TG_OP = 'INSERT' THEN
      UPDATE workspace_quotas 
      SET current_contacts = current_contacts + 1
      WHERE workspace_id = NEW.workspace_id;
    ELSIF TG_OP = 'DELETE' THEN
      UPDATE workspace_quotas 
      SET current_contacts = current_contacts - 1
      WHERE workspace_id = OLD.workspace_id;
    END IF;
  END IF;
  
  -- ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ deals, users, storage
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

**ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° ĞºĞ²Ğ¾Ñ‚ Ğ² Server Actions:**

```typescript
async function checkQuota(workspaceId: string, quotaType: 'contacts' | 'deals' | 'users') {
  const supabase = createServerClient()
  
  const { data: quota } = await supabase
    .from('workspace_quotas')
    .select('*')
    .eq('workspace_id', workspaceId)
    .single()
  
  if (!quota) return false
  
  const limits = {
    contacts: quota.current_contacts >= quota.max_contacts,
    deals: quota.current_deals >= quota.max_deals,
    users: quota.current_users >= quota.max_users
  }
  
  return !limits[quotaType]
}
```

### 8.3 ĞŸĞ»Ğ°Ñ‚Ñ–Ğ¶Ğ½Ğ° Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾:
1. **WayForPay** (Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ°, Ğ½Ğ°Ğ¹Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ–ÑˆĞ¸Ğ¹)
2. **Fondy** (Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°)
3. **Stripe** (Ğ´Ğ»Ñ Ğ¼Ñ–Ğ¶Ğ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ğ¸Ñ… Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ñ–Ğ² Ğ² Ğ¼Ğ°Ğ¹Ğ±ÑƒÑ‚Ğ½ÑŒĞ¾Ğ¼Ñƒ)

**Ğ¡Ñ…ĞµĞ¼Ğ° Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞºĞ¸:**

```sql
CREATE TABLE subscriptions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workspace_id UUID NOT NULL REFERENCES workspaces(id),
  tier TEXT NOT NULL, -- 'free', 'starter', 'pro', 'enterprise'
  status TEXT NOT NULL DEFAULT 'active', -- 'active', 'past_due', 'cancelled', 'trialing'
  
  -- Billing
  billing_period TEXT DEFAULT 'monthly', -- 'monthly', 'annual'
  amount NUMERIC(10,2) NOT NULL,
  currency TEXT DEFAULT 'UAH',
  
  -- Dates
  trial_ends_at TIMESTAMPTZ,
  current_period_start TIMESTAMPTZ NOT NULL,
  current_period_end TIMESTAMPTZ NOT NULL,
  cancelled_at TIMESTAMPTZ,
  
  -- Payment provider
  payment_provider TEXT, -- 'wayforpay', 'fondy', 'stripe'
  external_subscription_id TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ñ–Ğ²
CREATE TABLE payments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  subscription_id UUID NOT NULL REFERENCES subscriptions(id),
  workspace_id UUID NOT NULL REFERENCES workspaces(id),
  
  amount NUMERIC(10,2) NOT NULL,
  currency TEXT NOT NULL,
  status TEXT NOT NULL, -- 'pending', 'completed', 'failed', 'refunded'
  
  payment_provider TEXT NOT NULL,
  external_payment_id TEXT,
  
  invoice_url TEXT,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  completed_at TIMESTAMPTZ
);
```

**Webhook Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ° (WayForPay):**

```typescript
// app/api/webhooks/wayforpay/route.ts
export async function POST(request: NextRequest) {
  const body = await request.json()
  
  // Verify signature
  // ...
  
  const supabase = createClient(
    process.env.SUPABASE_URL!,
    process.env.SUPABASE_SERVICE_KEY!
  )
  
  if (body.transactionStatus === 'Approved') {
    // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞºÑƒ
    await supabase
      .from('subscriptions')
      .update({
        status: 'active',
        current_period_end: new Date(
          Date.now() + 30 * 24 * 60 * 60 * 1000
        ).toISOString()
      })
      .eq('external_subscription_id', body.orderReference)
    
    // Ğ—Ğ°Ğ¿Ğ¸ÑÑƒÑ”Ğ¼Ğ¾ Ğ¿Ğ»Ğ°Ñ‚Ñ–Ğ¶
    await supabase.from('payments').insert({
      subscription_id: body.orderReference,
      amount: body.amount,
      currency: body.currency,
      status: 'completed',
      payment_provider: 'wayforpay',
      external_payment_id: body.transactionId
    })
  }
  
  return NextResponse.json({ success: true })
}
```

### 8.4 Trial Period

**14 Ğ´Ğ½Ñ–Ğ² Ğ±ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¾ Ğ´Ğ»Ñ Starter Ñ– Pro:**

```typescript
async function startTrial(workspaceId: string, tier: 'starter' | 'pro') {
  const trialEnd = new Date()
  trialEnd.setDate(trialEnd.getDate() + 14)
  
  await supabase.from('subscriptions').insert({
    workspace_id: workspaceId,
    tier,
    status: 'trialing',
    trial_ends_at: trialEnd.toISOString(),
    current_period_start: new Date().toISOString(),
    current_period_end: trialEnd.toISOString(),
    amount: 0
  })
  
  // ĞĞ½Ğ¾Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ ĞºĞ²Ğ¾Ñ‚Ğ¸ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾ tier
  const quotas = {
    starter: { max_users: 5, max_contacts: 5000, max_deals: 1000 },
    pro: { max_users: 20, max_contacts: 50000, max_deals: 10000 }
  }
  
  await supabase
    .from('workspace_quotas')
    .update(quotas[tier])
    .eq('workspace_id', workspaceId)
}
```

### 8.5 Downgrade/Cancellation Policy

**ĞŸÑ€Ğ¸ downgrade:**
- Ğ”Ğ°Ğ½Ñ– Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ 30 Ğ´Ğ½Ñ–Ğ²
- Read-only Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ "Ğ·Ğ°Ğ¹Ğ²Ğ¸Ñ…" Ğ·Ğ°Ğ¿Ğ¸ÑÑ–Ğ²
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ

**ĞŸÑ€Ğ¸ cancellation:**
- Ğ”Ğ°Ğ½Ñ– Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ 90 Ğ´Ğ½Ñ–Ğ²
- ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ Ñ€ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ°Ñ†Ñ–Ñ—
- Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ²ÑÑ–Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…

```typescript
async function handleSubscriptionCancellation(workspaceId: string) {
  // Soft delete: Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ² read-only Ñ€ĞµĞ¶Ğ¸Ğ¼
  await supabase
    .from('workspaces')
    .update({
      subscription_tier: 'cancelled',
      subscription_status: 'cancelled',
      settings: {
        read_only: true,
        data_retention_until: new Date(
          Date.now() + 90 * 24 * 60 * 60 * 1000
        ).toISOString()
      }
    })
    .eq('id', workspaceId)
  
  // Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ”Ğ¼Ğ¾ email Ğ· Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ñ–Ñ”Ñ Ğ¿Ğ¾ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ
  // ...
}
```

---

## 9. UX/UI Principles (Mobile-First)

### 9.1 Design System

**ĞšĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¾Ğ²Ğ° ÑÑ…ĞµĞ¼Ğ°:**
```typescript
// Based on shadcn/ui + custom UA theme
const colors = {
  primary: {
    50: '#eff6ff',  // Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¸Ğ¹ Ğ±Ğ»Ğ°ĞºĞ¸Ñ‚Ğ½Ğ¸Ğ¹
    500: '#3b82f6',
    900: '#1e3a8a'
  },
  accent: {
    50: '#fefce8',  // Ğ–Ğ¾Ğ²Ñ‚Ğ¸Ğ¹ (Ğ°ĞºÑ†ĞµĞ½Ñ‚)
    500: '#eab308',
    900: '#713f12'
  },
  // ... Ñ–Ğ½ÑˆÑ– ĞºĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¸
}
```

**Ğ¢Ğ¸Ğ¿Ğ¾Ğ³Ñ€Ğ°Ñ„Ñ–Ñ:**
- Font Family: Inter (Ğ±ĞµĞ· serif, Ğ´Ğ¾Ğ±Ñ€Ğµ Ñ‡Ğ¸Ñ‚Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ¼Ğ¾Ğ±Ñ–Ğ»ÑŒĞ½Ğ¸Ñ…)
- Base size: 16px (Ğ¼Ğ¾Ğ±Ñ–Ğ»ĞºĞ°), 14px (Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿)
- Headings: 24px/20px/18px
- Line height: 1.5

**Spacing:**
- Base unit: 4px
- Scale: 4, 8, 12, 16, 24, 32, 48, 64

### 9.2 Mobile-First Components

#### 9.2.1 Navigation

**Bottom Tab Bar (Ğ¼Ğ¾Ğ±Ñ–Ğ»ĞºĞ°):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚         Content Area            â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´] [Ğ£Ğ³Ğ¾Ğ´Ğ¸] [+] [Ğ—Ğ°Ğ²Ğ´.] [â˜°]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Sidebar (Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      â”‚                          â”‚
â”‚ Nav  â”‚    Content Area          â”‚
â”‚      â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.2.2 List Views

**Contact List (Ğ¼Ğ¾Ğ±Ñ–Ğ»ĞºĞ°):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ĞŸĞ¾ÑˆÑƒĞº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ–Ğ²...          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Ğ†Ğ¼'Ñ ĞŸÑ€Ñ–Ğ·Ğ²Ğ¸Ñ‰Ğµ]         [>]     â”‚
â”‚ â˜ï¸ +380 XX XXX XX XX            â”‚
â”‚ ğŸ¢ ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ | ğŸ’¼ ĞŸĞ¾ÑĞ°Ğ´Ğ°         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Swipe for actions]             â”‚
â”‚  â† ğŸ“ Call | âœï¸ Edit | ğŸ—‘ï¸ Delete â†’â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Infinite scroll + Pull to refresh**

#### 9.2.3 Forms

**ĞĞ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ñ–Ğ»ÑŒĞ½Ğ¸Ñ…:**
- Auto-focus Ğ¿ĞµÑ€ÑˆĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ
- ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ– `inputMode` (`tel`, `email`, `numeric`)
- ĞĞ²Ñ‚Ğ¾ĞºĞ¾Ğ¼Ğ¿Ğ»Ñ–Ñ‚ Ğ´Ğµ Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾
- Native date/time pickers
- Floating labels (Ğ±Ñ–Ğ»ÑŒÑˆĞµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ€Ñƒ)

```tsx
<Input
  type="tel"
  inputMode="tel"
  autoComplete="tel"
  pattern="[+]?[0-9]*"
  placeholder="+380"
/>
```

#### 9.2.4 Kanban Board (Deals)

**ĞœĞ¾Ğ±Ñ–Ğ»ĞºĞ°:** Horizontal scroll Ğ¿Ğ¾ ĞµÑ‚Ğ°Ğ¿Ğ°Ñ…
```
â† [Ğ›Ñ–Ğ´] [ĞšĞ²Ğ°Ğ»Ñ–Ñ„.] [ĞŸÑ€Ğ¾Ğ¿Ğ¾Ğ·.] [ĞŸĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸] [Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¾] â†’
```

**Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿:** Grid layout
```
[Ğ›Ñ–Ğ´]      [ĞšĞ²Ğ°Ğ»Ñ–Ñ„.]    [ĞŸÑ€Ğ¾Ğ¿Ğ¾Ğ·.]   [ĞŸĞµÑ€ĞµĞ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸]  [Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¾]
[Card 1]   [Card 3]     [Card 5]    [Card 7]      [Card 9]
[Card 2]   [Card 4]     [Card 6]    [Card 8]      [Card 10]
```

### 9.3 Touch Gestures

| Gesture | Action |
|---------|--------|
| Swipe right on list item | Ğ”Ğ·Ğ²Ñ–Ğ½Ğ¾Ğº |
| Swipe left on list item | Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ |
| Long press | ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ğµ Ğ¼ĞµĞ½Ñ |
| Pull down | Refresh |
| Pull up | Load more |
| Pinch | Zoom (Ğ´Ğ»Ñ Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½ÑŒ) |

### 9.4 Loading States

**Skeleton screens Ğ·Ğ°Ğ¼Ñ–ÑÑ‚ÑŒ spinners:**

```tsx
// Contact Skeleton
<div className="space-y-4">
  <Skeleton className="h-12 w-full" />
  <Skeleton className="h-8 w-3/4" />
  <Skeleton className="h-8 w-1/2" />
</div>
```

**Optimistic UI:**
- ĞŸĞ¾ĞºĞ°Ğ·ÑƒÑ”Ğ¼Ğ¾ Ğ·Ğ¼Ñ–Ğ½Ğ¸ Ğ²Ñ–Ğ´Ñ€Ğ°Ğ·Ñƒ
- Ğ’Ñ–Ğ´ĞºĞ¾Ñ‡ÑƒÑ”Ğ¼Ğ¾ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ñ†Ñ–
- Toast Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ

### 9.5 Empty States

**ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚          ğŸ“‹                     â”‚
â”‚                                 â”‚
â”‚   ĞŸĞ¾ĞºĞ¸ Ñ‰Ğ¾ Ğ½ĞµĞ¼Ğ°Ñ” ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ–Ğ²       â”‚
â”‚                                 â”‚
â”‚   ĞĞ°Ñ‚Ğ¸ÑĞ½Ñ–Ñ‚ÑŒ "+" Ñ‰Ğ¾Ğ± Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸      â”‚
â”‚   ÑĞ²Ñ–Ğ¹ Ğ¿ĞµÑ€ÑˆĞ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚           â”‚
â”‚                                 â”‚
â”‚      [+ Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚]         â”‚
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.6 Accessibility

**WCAG 2.1 AA compliance:**
- ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ÑÑ‚Ğ½Ñ–ÑÑ‚ÑŒ Ñ‚ĞµĞºÑÑ‚Ñƒ: Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 4.5:1
- Touch targets: Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 44Ã—44px
- Keyboard navigation Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ñ–
- ARIA labels Ğ´Ğ»Ñ screen readers
- Focus indicators
- ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ¸ Ñ„Ğ¾Ñ€Ğ¼: Ñ‡Ñ–Ñ‚ĞºĞ¾ Ğ¿Ğ¾Ğ¼Ñ–Ñ‡ĞµĞ½Ñ–, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ñ–

```tsx
<button
  aria-label="Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚"
  className="min-h-[44px] min-w-[44px]"
>
  <Plus />
</button>
```

### 9.7 Responsive Breakpoints

```typescript
const breakpoints = {
  mobile: '0px',     // 320px - 767px
  tablet: '768px',   // 768px - 1023px
  desktop: '1024px', // 1024px - 1279px
  wide: '1280px'     // 1280px+
}
```

**Tailwind config:**
```js
module.exports = {
  theme: {
    screens: {
      'sm': '640px',
      'md': '768px',
      'lg': '1024px',
      'xl': '1280px',
      '2xl': '1536px'
    }
  }
}
```

---

## 10. Offline-First / PWA Sync

### 10.1 PWA Configuration

**manifest.json:**
```json
{
  "name": "CRM SaaS",
  "short_name": "CRM",
  "description": "Ğ’Ğ°ÑˆĞ° CRM ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°, ÑĞºĞ° Ğ¿Ñ€Ğ°Ñ†ÑÑ” Ğ±ĞµĞ· Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ñƒ",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#3b82f6",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "/icons/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/icons/icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ],
  "categories": ["business", "productivity"],
  "lang": "uk-UA"
}
```

### 10.2 IndexedDB Schema

```typescript
// lib/db/schema.ts
import Dexie, { Table } from 'dexie'

interface LocalContact {
  id: string
  workspace_id: string
  first_name: string
  last_name: string
  phones: any[]
  emails: any[]
  // ... Ğ²ÑÑ– Ğ¿Ğ¾Ğ»Ñ Ğ· Ğ‘Ğ”
  _synced: boolean
  _version: number
  _updated_at: string
}

interface SyncQueueItem {
  id: string
  entity_type: string
  operation: 'create' | 'update' | 'delete'
  entity_id: string
  data: any
  timestamp: number
  retries: number
}

class LocalDatabase extends Dexie {
  contacts!: Table<LocalContact, string>
  companies!: Table<LocalCompany, string>
  deals!: Table<LocalDeal, string>
  tasks!: Table<LocalTask, string>
  syncQueue!: Table<SyncQueueItem, string>
  
  constructor() {
    super('crm_local_db')
    
    this.version(1).stores({
      contacts: 'id, workspace_id, _synced, _updated_at, *tags',
      companies: 'id, workspace_id, _synced, _updated_at',
      deals: 'id, workspace_id, stage_id, _synced, _updated_at',
      tasks: 'id, workspace_id, assigned_to, due_date, _synced',
      syncQueue: 'id, entity_type, timestamp, retries'
    })
  }
}

export const db = new LocalDatabase()
```

### 10.3 Sync Manager

```typescript
// lib/sync/manager.ts
class SyncManager {
  private isOnline = navigator.onLine
  private isSyncing = false
  private syncInterval: NodeJS.Timeout | null = null
  
  constructor() {
    // Listen to online/offline events
    window.addEventListener('online', () => this.handleOnline())
    window.addEventListener('offline', () => this.handleOffline())
    
    // Start background sync
    this.startBackgroundSync()
  }
  
  private handleOnline() {
    this.isOnline = true
    console.log('ğŸŸ¢ Online: starting sync...')
    this.sync()
  }
  
  private handleOffline() {
    this.isOnline = false
    console.log('ğŸ”´ Offline mode')
  }
  
  private startBackgroundSync() {
    // Sync every 30 seconds if online
    this.syncInterval = setInterval(() => {
      if (this.isOnline) {
        this.sync()
      }
    }, 30000)
  }
  
  async sync() {
    if (this.isSyncing) return
    
    this.isSyncing = true
    
    try {
      // 1. Push local changes to server
      await this.pushChanges()
      
      // 2. Pull server changes
      await this.pullChanges()
      
      console.log('âœ… Sync completed')
    } catch (error) {
      console.error('âŒ Sync failed:', error)
    } finally {
      this.isSyncing = false
    }
  }
  
  private async pushChanges() {
    const queue = await db.syncQueue.toArray()
    
    for (const item of queue) {
      try {
        await this.processSyncItem(item)
        await db.syncQueue.delete(item.id)
      } catch (error) {
        console.error('Failed to sync item:', item, error)
        
        // Increment retry counter
        await db.syncQueue.update(item.id, {
          retries: item.retries + 1
        })
        
        // Give up after 5 retries
        if (item.retries >= 5) {
          await db.syncQueue.delete(item.id)
          // TODO: Notify user about failed sync
        }
      }
    }
  }
  
  private async processSyncItem(item: SyncQueueItem) {
    const supabase = createBrowserClient()
    
    switch (item.operation) {
      case 'create':
        const { data: created } = await supabase
          .from(item.entity_type)
          .insert(item.data)
          .select()
          .single()
        
        // Update local record with server ID
        if (item.entity_type === 'contacts') {
          await db.contacts.update(item.entity_id, {
            id: created.id,
            _synced: true,
            _version: created.version || 1
          })
        }
        break
      
      case 'update':
        await supabase
          .from(item.entity_type)
          .update(item.data)
          .eq('id', item.entity_id)
        
        if (item.entity_type === 'contacts') {
          await db.contacts.update(item.entity_id, {
            _synced: true
          })
        }
        break
      
      case 'delete':
        await supabase
          .from(item.entity_type)
          .delete()
          .eq('id', item.entity_id)
        
        if (item.entity_type === 'contacts') {
          await db.contacts.delete(item.entity_id)
        }
        break
    }
  }
  
  private async pullChanges() {
    const supabase = createBrowserClient()
    
    // Get last sync timestamp
    const lastSync = localStorage.getItem('last_sync_timestamp') || 
                     new Date(0).toISOString()
    
    // Fetch changed records
    const { data: contacts } = await supabase
      .from('contacts')
      .select('*')
      .gt('updated_at', lastSync)
    
    if (contacts) {
      for (const contact of contacts) {
        await this.mergeContact(contact)
      }
    }
    
    // Update last sync timestamp
    localStorage.setItem('last_sync_timestamp', new Date().toISOString())
  }
  
  private async mergeContact(serverContact: any) {
    const localContact = await db.contacts.get(serverContact.id)
    
    if (!localContact) {
      // New from server
      await db.contacts.add({
        ...serverContact,
        _synced: true,
        _version: serverContact.version || 1
      })
      return
    }
    
    // Conflict detection
    if (localContact._synced) {
      // No local changes, safe to update
      await db.contacts.put({
        ...serverContact,
        _synced: true,
        _version: serverContact.version || 1
      })
    } else {
      // Conflict! Local changes + server changes
      await this.resolveConflict(localContact, serverContact)
    }
  }
  
  private async resolveConflict(local: LocalContact, server: any) {
    // Strategy: Last Write Wins (server wins)
    console.warn('âš ï¸ Conflict detected:', local.id)
    
    // TODO: Implement smarter conflict resolution
    // For now: server wins
    await db.contacts.put({
      ...server,
      _synced: true,
      _version: server.version || 1
    })
    
    // Notify user about conflict
    // ...
  }
}

export const syncManager = new SyncManager()
```

### 10.4 Offline-Aware Hooks

```typescript
// hooks/useOfflineContacts.ts
export function useOfflineContacts() {
  const [contacts, setContacts] = useState<LocalContact[]>([])
  const [isOnline] = useOnlineStatus()
  
  useEffect(() => {
    loadContacts()
  }, [])
  
  async function loadContacts() {
    const localContacts = await db.contacts.toArray()
    setContacts(localContacts)
    
    // If online, trigger sync
    if (isOnline) {
      syncManager.sync()
    }
  }
  
  async function createContact(data: ContactInput) {
    const tempId = `temp_${Date.now()}`
    
    const newContact: LocalContact = {
      ...data,
      id: tempId,
      _synced: false,
      _version: 1,
      _updated_at: new Date().toISOString()
    }
    
    // Add to local DB immediately
    await db.contacts.add(newContact)
    
    // Add to sync queue
    await db.syncQueue.add({
      id: uuid(),
      entity_type: 'contacts',
      operation: 'create',
      entity_id: tempId,
      data,
      timestamp: Date.now(),
      retries: 0
    })
    
    // Update UI optimistically
    setContacts(prev => [...prev, newContact])
    
    // Trigger sync if online
    if (isOnline) {
      syncManager.sync()
    }
    
    return newContact
  }
  
  return { contacts, createContact }
}

// hooks/useOnlineStatus.ts
export function useOnlineStatus() {
  const [isOnline, setIsOnline] = useState(navigator.onLine)
  
  useEffect(() => {
    const handleOnline = () => setIsOnline(true)
    const handleOffline = () => setIsOnline(false)
    
    window.addEventListener('online', handleOnline)
    window.addEventListener('offline', handleOffline)
    
    return () => {
      window.removeEventListener('online', handleOnline)
      window.removeEventListener('offline', handleOffline)
    }
  }, [])
  
  return [isOnline, setIsOnline] as const
}
```

### 10.5 Service Worker Strategies

**ĞšĞµÑˆÑƒĞ²Ğ°Ğ½Ğ½Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ñ–Ñ—:**

1. **Static Assets** â€” Cache First
   - HTML, CSS, JS
   - Images, fonts

2. **API Calls** â€” Network First, fallback to Cache
   - `/api/*`
   - Supabase calls

3. **User-Generated Content** â€” Stale While Revalidate
   - Avatars, uploads

```typescript
// service-worker.ts
import { precacheAndRoute, createHandlerBoundToURL } from 'workbox-precaching'
import { registerRoute, NavigationRoute } from 'workbox-routing'
import { NetworkFirst, CacheFirst, StaleWhileRevalidate } from 'workbox-strategies'
import { BackgroundSyncPlugin } from 'workbox-background-sync'

// Precache app shell
precacheAndRoute(self.__WB_MANIFEST)

// API calls: Network First
registerRoute(
  ({ url }) => url.pathname.startsWith('/api/'),
  new NetworkFirst({
    cacheName: 'api-cache',
    networkTimeoutSeconds: 5,
    plugins: [
      new BackgroundSyncPlugin('api-queue', {
        maxRetentionTime: 24 * 60 // 24 hours
      })
    ]
  })
)

// Supabase: Network First
registerRoute(
  ({ url }) => url.origin.includes('supabase.co'),
  new NetworkFirst({
    cacheName: 'supabase-cache',
    networkTimeoutSeconds: 5
  })
)

// Images: Cache First
registerRoute(
  ({ request }) => request.destination === 'image',
  new CacheFirst({
    cacheName: 'images-cache'
  })
)

// App shell: Cache First
const handler = createHandlerBoundToURL('/index.html')
const navigationRoute = new NavigationRoute(handler)
registerRoute(navigationRoute)
```

### 10.6 Sync Indicators

**UI ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸:**

```tsx
// components/SyncIndicator.tsx
export function SyncIndicator() {
  const [isOnline] = useOnlineStatus()
  const [isSyncing, setIsSyncing] = useState(false)
  const [pendingCount, setPendingCount] = useState(0)
  
  useEffect(() => {
    // Count pending items
    db.syncQueue.count().then(setPendingCount)
  }, [isSyncing])
  
  return (
    <div className="flex items-center gap-2 text-sm">
      {isOnline ? (
        <>
          <div className="h-2 w-2 rounded-full bg-green-500" />
          {isSyncing ? (
            <span>Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ...</span>
          ) : pendingCount > 0 ? (
            <span>ĞÑ‡Ñ–ĞºÑƒÑ”: {pendingCount}</span>
          ) : (
            <span>Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾</span>
          )}
        </>
      ) : (
        <>
          <div className="h-2 w-2 rounded-full bg-gray-400" />
          <span>ĞÑ„Ğ»Ğ°Ğ¹Ğ½ Ñ€ĞµĞ¶Ğ¸Ğ¼</span>
          {pendingCount > 0 && (
            <span className="text-muted-foreground">
              ({pendingCount} Ğ² Ñ‡ĞµÑ€Ğ·Ñ–)
            </span>
          )}
        </>
      )}
    </div>
  )
}
```

---

## 11. Compliance & Legal

### 11.1 GDPR Compliance

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ²Ğ¸Ğ¼Ğ¾Ğ³Ğ¸:**

1. **Lawfulness, fairness, transparency**
   - Ğ§Ñ–Ñ‚ĞºĞ¾ Ğ¿Ğ¾ÑÑĞ½Ğ¸Ñ‚Ğ¸, ÑĞºÑ– Ğ´Ğ°Ğ½Ñ– Ğ·Ğ±Ğ¸Ñ€Ğ°Ñ”Ğ¼Ğ¾ Ñ– Ğ½Ğ°Ğ²Ñ–Ñ‰Ğ¾
   - Privacy Policy Ğ½Ğ° ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºÑ–Ğ¹ Ğ¼Ğ¾Ğ²Ñ–
   - Cookie consent banner

2. **Purpose limitation**
   - Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ Ğ´Ğ°Ğ½Ñ– Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ·Ğ° Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½ÑĞ¼
   - ĞĞµ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ Ğ´Ğ°Ğ½Ñ– Ñ‚Ñ€ĞµÑ‚Ñ–Ğ¼ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°Ğ¼

3. **Data minimization**
   - Ğ—Ğ±Ğ¸Ñ€Ğ°Ñ”Ğ¼Ğ¾ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ñ– Ğ´Ğ°Ğ½Ñ–
   - ĞĞ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ¿Ğ¾Ğ»Ñ Ğ¿Ğ¾Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ñ–

4. **Accuracy**
   - ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ– Ğ¼Ğ¾Ğ¶ÑƒÑ‚ÑŒ Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑĞ²Ğ¾Ñ— Ğ´Ğ°Ğ½Ñ–
   - Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ¼Ñ–Ğ½ (audit log)

5. **Storage limitation**
   - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ Ñ‡ĞµÑ€ĞµĞ· 90 Ğ´Ğ½Ñ–Ğ² Ğ¿Ñ–ÑĞ»Ñ Ğ·Ğ°ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ Ğ°ĞºĞ°ÑƒĞ½Ñ‚Ğ°
   - ĞÑ€Ñ…Ñ–Ğ²ÑƒĞ²Ğ°Ğ½Ğ½Ñ ÑÑ‚Ğ°Ñ€Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…

6. **Integrity and confidentiality**
   - Ğ¨Ğ¸Ñ„Ñ€ÑƒĞ²Ğ°Ğ½Ğ½Ñ (TLS + at-rest)
   - ĞĞ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ (RLS)
   - Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ– Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ– ĞºĞ¾Ğ¿Ñ–Ñ—

7. **Accountability**
   - DPA (Data Processing Agreement) Ğ´Ğ»Ñ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²
   - Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ´Ğ¾ ĞŸĞ”

**ĞŸÑ€Ğ°Ğ²Ğ° ÑÑƒĞ±'Ñ”ĞºÑ‚Ñ–Ğ² Ğ´Ğ°Ğ½Ğ¸Ñ…:**

| ĞŸÑ€Ğ°Ğ²Ğ¾ | Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ |
|-------|-----------|
| **Right to access** | Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ²ÑÑ–Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ… (JSON/CSV) |
| **Right to rectification** | Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ñ€Ğ¾Ñ„Ñ–Ğ»Ñ |
| **Right to erasure** | "Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ Ğ¼Ñ–Ğ¹ Ğ°ĞºĞ°ÑƒĞ½Ñ‚" |
| **Right to restrict processing** | Pause/Block Ğ°ĞºĞ°ÑƒĞ½Ñ‚ |
| **Right to data portability** | Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ² ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¸Ñ… Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°Ñ… |
| **Right to object** | Opt-out Ğ· Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²Ğ¸Ñ… Ñ€Ğ¾Ğ·ÑĞ¸Ğ»Ğ¾Ğº |

**Ğ†Ğ¼Ğ¿Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ:**

```typescript
// app/actions/gdpr.ts
'use server'

export async function exportUserData(userId: string) {
  const supabase = createServerClient()
  
  // Collect all user data
  const { data: profile } = await supabase.auth.getUser()
  const { data: workspaces } = await supabase
    .from('workspace_users')
    .select('workspace:workspaces(*)')
    .eq('user_id', userId)
  
  const { data: contacts } = await supabase
    .from('contacts')
    .select('*')
    .eq('created_by', userId)
  
  // ... Ñ–Ğ½ÑˆÑ– Ğ´Ğ°Ğ½Ñ–
  
  const exportData = {
    profile,
    workspaces,
    contacts,
    // ...
    exported_at: new Date().toISOString()
  }
  
  // Generate JSON file
  const fileName = `user_data_${userId}_${Date.now()}.json`
  const filePath = `/tmp/${fileName}`
  
  await fs.writeFile(filePath, JSON.stringify(exportData, null, 2))
  
  // Upload to Supabase Storage
  const { data: upload } = await supabase.storage
    .from('exports')
    .upload(fileName, filePath)
  
  // Send email with download link
  // ...
  
  return { success: true, downloadUrl: upload.path }
}

export async function deleteUserAccount(userId: string) {
  const supabase = createServerClient()
  
  // 1. Soft delete all user data
  await supabase
    .from('contacts')
    .update({ deleted_at: new Date().toISOString() })
    .eq('created_by', userId)
  
  // 2. Remove from workspaces
  await supabase
    .from('workspace_users')
    .delete()
    .eq('user_id', userId)
  
  // 3. Anonymize user profile
  await supabase.auth.admin.updateUserById(userId, {
    email: `deleted_${userId}@deleted.local`,
    user_metadata: { deleted: true }
  })
  
  // 4. Schedule hard delete in 90 days
  await supabase.from('deletion_queue').insert({
    user_id: userId,
    delete_after: new Date(Date.now() + 90 * 24 * 60 * 60 * 1000)
  })
  
  return { success: true }
}
```

### 11.2 Ğ—Ğ°ĞºĞ¾Ğ½ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ¸ Ğ¿Ñ€Ğ¾ Ğ·Ğ°Ñ…Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…

**Ğ’Ñ–Ğ´Ğ¼Ñ–Ğ½Ğ½Ğ¾ÑÑ‚Ñ– Ğ²Ñ–Ğ´ GDPR:**
- Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ Ğ±Ğ°Ğ· Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ… (ÑĞºÑ‰Ğ¾ >10,000 ÑÑƒĞ±'Ñ”ĞºÑ‚Ñ–Ğ²)
- ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ñ— Ğ¾ÑĞ¾Ğ±Ğ¸
- ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ Ğ²Ğ¸Ñ‚Ñ–Ğº Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ¿Ñ€Ğ¾Ñ‚ÑĞ³Ğ¾Ğ¼ 72 Ğ³Ğ¾Ğ´Ğ¸Ğ½

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ:**
- ĞŸĞ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ñ„Ñ–Ğ´ĞµĞ½Ñ†Ñ–Ğ¹Ğ½Ğ¾ÑÑ‚Ñ– (ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ñ)
- Ğ—Ğ³Ğ¾Ğ´Ğ° Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ ĞŸĞ” (checkbox Ğ¿Ñ€Ğ¸ Ñ€ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ—)
- ĞŸĞ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ ĞŸĞ”

```tsx
// components/ConsentCheckbox.tsx
export function ConsentCheckbox() {
  return (
    <div className="flex items-start gap-2">
      <Checkbox id="consent" required />
      <label htmlFor="consent" className="text-sm">
        Ğ¯ Ğ´Ğ°Ñ Ğ·Ğ³Ğ¾Ğ´Ñƒ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºÑƒ Ğ¼Ğ¾Ñ—Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾{' '}
        <a href="/privacy" className="underline">
          ĞŸĞ¾Ğ»Ñ–Ñ‚Ğ¸ĞºĞ¸ ĞºĞ¾Ğ½Ñ„Ñ–Ğ´ĞµĞ½Ñ†Ñ–Ğ¹Ğ½Ğ¾ÑÑ‚Ñ–
        </a>{' '}
        Ñ‚Ğ° Ğ—Ğ°ĞºĞ¾Ğ½Ñƒ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ¸ "ĞŸÑ€Ğ¾ Ğ·Ğ°Ñ…Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…"
      </label>
    </div>
  )
}
```

### 11.3 Cookie Policy

**Ğ¢Ğ¸Ğ¿Ğ¸ cookies:**

| Ğ¢Ğ¸Ğ¿ | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ | Ğ¢ĞµÑ€Ğ¼Ñ–Ğ½ | Ğ—Ğ³Ğ¾Ğ´Ğ° |
|-----|-------------|--------|-------|
| **ĞĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ñ–** | ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ, ÑĞµÑÑ–Ñ | 7 Ğ´Ğ½Ñ–Ğ² | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ |
| **Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–** | ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ, Ğ¼Ğ¾Ğ²Ğ° | 1 Ñ€Ñ–Ğº | ĞĞ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ |
| **ĞĞ½Ğ°Ğ»Ñ–Ñ‚Ğ¸Ñ‡Ğ½Ñ–** | Vercel Analytics | 1 Ñ€Ñ–Ğº | ĞĞ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ |

**Cookie Banner:**

```tsx
// components/CookieBanner.tsx
export function CookieBanner() {
  const [show, setShow] = useState(false)
  
  useEffect(() => {
    const consent = localStorage.getItem('cookie_consent')
    if (!consent) setShow(true)
  }, [])
  
  const accept = () => {
    localStorage.setItem('cookie_consent', 'all')
    setShow(false)
    // Enable analytics
  }
  
  const acceptNecessary = () => {
    localStorage.setItem('cookie_consent', 'necessary')
    setShow(false)
  }
  
  if (!show) return null
  
  return (
    <div className="fixed bottom-0 left-0 right-0 bg-background border-t p-4 shadow-lg">
      <div className="max-w-7xl mx-auto flex items-center justify-between gap-4">
        <p className="text-sm">
          ĞœĞ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ cookies Ğ´Ğ»Ñ Ğ¿Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ñ Ğ²Ğ°ÑˆĞ¾Ğ³Ğ¾ Ğ´Ğ¾ÑĞ²Ñ–Ğ´Ñƒ.{' '}
          <a href="/cookies" className="underline">
            Ğ”Ñ–Ğ·Ğ½Ğ°Ñ‚Ğ¸ÑÑ Ğ±Ñ–Ğ»ÑŒÑˆĞµ
          </a>
        </p>
        <div className="flex gap-2">
          <Button variant="outline" onClick={acceptNecessary}>
            Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ñ–
          </Button>
          <Button onClick={accept}>
            ĞŸÑ€Ğ¸Ğ¹Ğ½ÑÑ‚Ğ¸ Ğ²ÑÑ–
          </Button>
        </div>
      </div>
    </div>
  )
}
```

### 11.4 Terms of Service

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»Ğ¸:**

1. **ĞŸÑ€ĞµĞ´Ğ¼ĞµÑ‚ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñƒ** â€” Ğ½Ğ°Ğ´Ğ°Ğ½Ğ½Ñ SaaS Ğ¿Ğ¾ÑĞ»ÑƒĞ³Ğ¸
2. **ĞŸÑ€Ğ°Ğ²Ğ° Ñ‚Ğ° Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¸ ÑÑ‚Ğ¾Ñ€Ñ–Ğ½**
3. **ĞĞ¿Ğ»Ğ°Ñ‚Ğ°** â€” Ñ‚Ğ°Ñ€Ğ¸Ñ„Ğ¸, ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸
4. **ĞšĞ¾Ğ½Ñ„Ñ–Ğ´ĞµĞ½Ñ†Ñ–Ğ¹Ğ½Ñ–ÑÑ‚ÑŒ** â€” Ğ¿Ğ¾ÑĞ¸Ğ»Ğ°Ğ½Ğ½Ñ Ğ½Ğ° Privacy Policy
5. **Ğ†Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ° Ğ²Ğ»Ğ°ÑĞ½Ñ–ÑÑ‚ÑŒ** â€” copyright, Ğ»Ñ–Ñ†ĞµĞ½Ğ·Ñ–Ñ
6. **ĞĞ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ñ–**
7. **Ğ Ğ¾Ğ·Ñ–Ñ€Ğ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñƒ**
8. **Ğ—Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²Ğ½Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¾** â€” Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ´Ğ°Ğ²ÑÑ‚Ğ²Ğ¾ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ¸

### 11.5 Data Breach Response Plan

**ĞŸÑ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸ Ğ²Ğ¸Ñ‚Ğ¾ĞºÑƒ Ğ´Ğ°Ğ½Ğ¸Ñ…:**

1. **Ğ’Ğ¸ÑĞ²Ğ»ĞµĞ½Ğ½Ñ** (0-4 Ğ³Ğ¾Ğ´)
   - Monitoring/alerting ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
   - Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ

2. **ĞÑ†Ñ–Ğ½ĞºĞ°** (4-24 Ğ³Ğ¾Ğ´)
   - Ğ¯ĞºÑ– Ğ´Ğ°Ğ½Ñ– Ğ·Ğ°Ñ‡ĞµĞ¿Ğ»ĞµĞ½Ñ–?
   - Ğ¡ĞºÑ–Ğ»ÑŒĞºĞ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²?
   - Ğ¯Ğº ÑÑ‚Ğ°Ğ²ÑÑ Ğ²Ğ¸Ñ‚Ñ–Ğº?

3. **Ğ¡Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ** (24-48 Ğ³Ğ¾Ğ´)
   - Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¸ Ğ²Ñ€Ğ°Ğ·Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ
   - Ğ—Ğ¼Ñ–Ğ½Ğ¸Ñ‚Ğ¸ ĞºĞ»ÑÑ‡Ñ–/Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ–
   - Ğ‘Ğ»Ğ¾ĞºÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿

4. **ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ** (Ğ² Ğ¼ĞµĞ¶Ğ°Ñ… 72 Ğ³Ğ¾Ğ´)
   - ĞŸĞ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ¸Ñ‚Ğ¸ ÑƒĞ¿Ğ¾Ğ²Ğ½Ğ¾Ğ²Ğ°Ğ¶ĞµĞ½Ğ¾Ğ³Ğ¾ Ğ· ĞŸĞ” (Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ°)
   - Email Ğ¿Ğ¾ÑÑ‚Ñ€Ğ°Ğ¶Ğ´Ğ°Ğ»Ğ¸Ğ¼ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°Ğ¼
   - ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ° Ğ·Ğ°ÑĞ²Ğ° (ÑĞºÑ‰Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ½Ğ¾)

5. **Ğ Ğ¾Ğ·ÑĞ»Ñ–Ğ´ÑƒĞ²Ğ°Ğ½Ğ½Ñ** (48 Ğ³Ğ¾Ğ´ - 2 Ñ‚Ğ¸Ğ¶Ğ½Ñ–)
   - Root cause analysis
   - ĞŸĞ»Ğ°Ğ½ Ğ·Ğ°Ğ¿Ğ¾Ğ±Ñ–Ğ³Ğ°Ğ½Ğ½Ñ

6. **Ğ’Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ**
   - ĞŸĞ°Ñ‚Ñ‡/Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ
   - Ğ‘ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ¼Ğ¾Ğ½Ñ–Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ½Ğ¾Ñ— Ñ–ÑÑ‚Ğ¾Ñ€Ñ–Ñ— (ÑĞºÑ‰Ğ¾ Ğ²Ğ¸Ñ‚Ñ–Ğº Ñ„Ñ–Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…)

**Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ:**

```
Ğ¢ĞµĞ¼Ğ°: Ğ’Ğ°Ğ¶Ğ»Ğ¸Ğ²Ğµ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ñ€Ğ¾ Ğ±ĞµĞ·Ğ¿ĞµĞºÑƒ Ğ²Ğ°ÑˆĞ¾Ğ³Ğ¾ Ğ°ĞºĞ°ÑƒĞ½Ñ‚Ğ°

Ğ¨Ğ°Ğ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡,

ĞœĞ¸ Ğ²Ğ¸ÑĞ²Ğ¸Ğ»Ğ¸ Ñ–Ğ½Ñ†Ğ¸Ğ´ĞµĞ½Ñ‚ Ğ±ĞµĞ·Ğ¿ĞµĞºĞ¸, ÑĞºĞ¸Ğ¹ Ğ¼Ñ–Ğ³ Ğ²Ğ¿Ğ»Ğ¸Ğ½ÑƒÑ‚Ğ¸ Ğ½Ğ° Ğ²Ğ°Ñˆ Ğ°ĞºĞ°ÑƒĞ½Ñ‚ Ğ² CRM SaaS.

Ğ©Ğ¾ ÑÑ‚Ğ°Ğ»Ğ¾ÑÑ:
[ĞĞ¿Ğ¸Ñ Ñ–Ğ½Ñ†Ğ¸Ğ´ĞµĞ½Ñ‚Ñƒ]

Ğ¯ĞºÑ– Ğ´Ğ°Ğ½Ñ– Ğ¼Ğ¾Ğ³Ğ»Ğ¸ Ğ±ÑƒÑ‚Ğ¸ Ğ·Ğ°Ñ‡ĞµĞ¿Ğ»ĞµĞ½Ñ–:
- Ğ†Ğ¼'Ñ Ñ‚Ğ° email
- [Ğ†Ğ½ÑˆÑ– Ğ´Ğ°Ğ½Ñ–]

Ğ©Ğ¾ Ğ¼Ğ¸ Ğ·Ñ€Ğ¾Ğ±Ğ¸Ğ»Ğ¸:
- [Ğ”Ñ–Ñ— Ğ· Ğ²Ğ¸Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ]

Ğ©Ğ¾ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ”Ğ¼Ğ¾ Ğ²Ğ°Ğ¼:
- Ğ—Ğ¼Ñ–Ğ½Ñ–Ñ‚Ğ¸ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ
- Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ 2FA

Ğ—Ğ° Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ¾Ñ Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ”Ñ: security@crm-saas.com

Ğ— Ğ¿Ğ¾Ğ²Ğ°Ğ³Ğ¾Ñ,
ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° CRM SaaS
```

### 11.6 Security Measures (Ğ¢ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ñ–)

```typescript
// ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ´Ğ¾ ĞŸĞ”
async function logDataAccess(
  userId: string,
  action: string,
  entityType: string,
  entityId: string
) {
  await supabase.from('audit_log').insert({
    user_id: userId,
    action, // 'view', 'create', 'update', 'delete', 'export'
    entity_type: entityType,
    entity_id: entityId,
    ip_address: request.ip,
    user_agent: request.headers['user-agent'],
    timestamp: new Date().toISOString()
  })
}

// ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´: Rate limiting Ğ´Ğ»Ñ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñƒ Ğ´Ğ°Ğ½Ğ¸Ñ…
const exportLimiter = new Map<string, number>()

async function checkExportLimit(userId: string) {
  const now = Date.now()
  const lastExport = exportLimiter.get(userId) || 0
  
  if (now - lastExport < 60 * 60 * 1000) {
    throw new Error('Ğ’Ğ¸ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ´Ğ°Ğ½Ñ– Ğ»Ğ¸ÑˆĞµ Ñ€Ğ°Ğ· Ğ½Ğ° Ğ³Ğ¾Ğ´Ğ¸Ğ½Ñƒ')
  }
  
  exportLimiter.set(userId, now)
}
```

---

## 12. MVP Scope

### 12.1 MVP Feature List

**âœ… Must Have (MVP):**

**ĞĞ²Ñ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ:**
- [ ] Ğ ĞµÑ”ÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ (email + password)
- [ ] Ğ›Ğ¾Ğ³Ñ–Ğ½
- [ ] Ğ’Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ
- [ ] Email verification

**Workspace:**
- [ ] Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ workspace
- [ ] Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğ¸ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° (email)
- [ ] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– Ñ€Ğ¾Ğ»Ñ– (Owner, User)

**ĞšĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸:**
- [ ] Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚
- [ ] Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚
- [ ] Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ (soft delete)
- [ ] Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ–Ğ² (Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸, Ğ¿Ğ¾ÑˆÑƒĞº)
- [ ] Ğ”ĞµÑ‚Ğ°Ğ»Ñ– ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ° (+ timeline)

**ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ—:**
- [ ] CRUD ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ğ¹
- [ ] Ğ—Ğ²'ÑĞ·Ğ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ–Ğ² Ğ· ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–ÑĞ¼Ğ¸

**Ğ£Ğ³Ğ¾Ğ´Ğ¸:**
- [ ] Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ ÑƒĞ³Ğ¾Ğ´Ñƒ
- [ ] Kanban Ğ´Ğ¾ÑˆĞºĞ° (Ğ¿ĞµÑ€ĞµĞ¼Ñ–Ñ‰ĞµĞ½Ğ½Ñ Ğ¼Ñ–Ğ¶ ĞµÑ‚Ğ°Ğ¿Ğ°Ğ¼Ğ¸)
- [ ] Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸ Ğ´Ğ¾ ÑƒĞ³Ğ¾Ğ´Ğ¸
- [ ] Ğ—Ğ°ĞºÑ€Ğ¸Ñ‚Ğ¸ ÑƒĞ³Ğ¾Ğ´Ñƒ (Ğ²Ğ¸Ğ³Ñ€Ğ°Ğ½Ğ¾/Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¾)

**Ğ—Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ:**
- [ ] Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ
- [ ] ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½ÑŒ
- [ ] Ğ’Ğ¸ĞºĞ¾Ğ½Ğ°Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ
- [ ] ĞĞ°Ğ³Ğ°Ğ´ÑƒĞ²Ğ°Ğ½Ğ½Ñ (basic push)

**ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸:**
- [ ] CRUD Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ–Ğ²
- [ ] ĞŸĞ¾ÑˆÑƒĞº Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ– ÑƒĞ³Ğ¾Ğ´Ğ¸

**ĞĞ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ°:**
- [ ] Ğ”Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ (Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ– Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸)
- [ ] ĞšĞ¾Ğ½Ğ²ĞµÑ€ÑÑ–Ñ Ğ²Ğ¾Ñ€Ğ¾Ğ½ĞºĞ¸
- [ ] Ğ¢Ğ¾Ğ¿-Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ¸

**PWA:**
- [ ] Offline-first (IndexedDB)
- [ ] Service Worker
- [ ] Sync queue
- [ ] Push notifications (basic)

**UI:**
- [ ] Mobile-first Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½
- [ ] Dark mode
- [ ] Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° Ğ¼Ğ¾Ğ²Ğ°

**âŒ Not in MVP:**
- Email-Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ
- SMS
- ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ°
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ñ–Ñ
- Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸
- Ğ¤Ñ–Ğ½Ğ°Ğ½ÑĞ¸
- Ğ Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ° Ğ°Ğ½Ğ°Ğ»Ñ–Ñ‚Ğ¸ĞºĞ°
- API
- Ğ•ĞºÑĞ¿Ğ¾Ñ€Ñ‚/Ğ†Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ (ĞºÑ€Ñ–Ğ¼ Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğ³Ğ¾ CSV)
- 2FA
- OAuth (Google/Microsoft)
- White-label

### 12.2 MVP Timeline

**Ğ¡Ğ¿Ñ€Ğ¸Ğ½Ñ‚Ğ¸ (2 Ñ‚Ğ¸Ğ¶Ğ½Ñ– ĞºĞ¾Ğ¶ĞµĞ½):**

**Sprint 1-2 (4 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Foundation**
- [ ] Next.js 16 setup + FSD structure
- [ ] Supabase setup (DB, Auth, Storage)
- [ ] shadcn/ui + Tailwind config
- [ ] Authentication flow
- [ ] Workspace management
- [ ] RLS policies

**Sprint 3-4 (4 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Core Features**
- [ ] Contacts CRUD
- [ ] Companies CRUD
- [ ] Deals + Pipeline
- [ ] Basic analytics dashboard

**Sprint 5-6 (4 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Secondary Features**
- [ ] Tasks + Calendar
- [ ] Products
- [ ] Activity timeline
- [ ] File uploads

**Sprint 7-8 (4 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Mobile + Offline**
- [ ] Mobile-first UI optimization
- [ ] PWA setup
- [ ] IndexedDB + Sync
- [ ] Service Worker

**Sprint 9 (2 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Polish + Testing**
- [ ] Bug fixes
- [ ] Performance optimization
- [ ] E2E tests
- [ ] User testing

**Sprint 10 (2 Ñ‚Ğ¸Ğ¶Ğ½Ñ–): Pre-Launch**
- [ ] Legal docs (Privacy Policy, ToS)
- [ ] Landing page
- [ ] Onboarding flow
- [ ] Monitoring + Logging

**Total: 20 Ñ‚Ğ¸Ğ¶Ğ½Ñ–Ğ² (5 Ğ¼Ñ–ÑÑÑ†Ñ–Ğ²)**

### 12.3 MVP Success Criteria

**Ğ¢ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ñ–:**
- âœ… 90% offline functionality
- âœ… <2s load time (mobile 3G)
- âœ… Zero critical bugs
- âœ… 95% test coverage (Server Actions)

**ĞŸÑ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²Ñ–:**
- âœ… 10 active users (beta testers)
- âœ… Average session: >10 Ñ…Ğ²
- âœ… Daily active users: >50%
- âœ… NPS: >30

**Ğ‘Ñ–Ğ·Ğ½ĞµÑĞ¾Ğ²Ñ–:**
- âœ… ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ problem-solution fit
- âœ… 5 Ğ¿Ğ»Ğ°Ñ‚Ğ½Ğ¸Ñ… beta customers (at discount)
- âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ñ–ÑÑ‚ÑŒ Ğ´Ğ¾ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ

---

## 13. Risks & Edge Cases

### 13.1 Technical Risks

| Ğ Ğ¸Ğ·Ğ¸Ğº | Ğ™Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ñ–ÑÑ‚ÑŒ | Ğ’Ğ¿Ğ»Ğ¸Ğ² | Mitigation |
|-------|-------------|-------|------------|
| **Supabase free tier limit** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | ĞœĞ¾Ğ½Ñ–Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ usage, Ğ°Ñ€Ñ…Ñ–Ğ²ÑƒĞ²Ğ°Ğ½Ğ½Ñ ÑÑ‚Ğ°Ñ€Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ…, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ñ–ÑÑ‚ÑŒ Ğ´Ğ¾ Ğ¼Ñ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ— |
| **Vercel bandwidth limit** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | Aggressive caching, optimize images, CDN |
| **Offline sync conflicts** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹ | Last write wins + user notification, conflict resolution UI |
| **Browser storage quota** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | Limit offline data (30 Ğ´Ğ½Ñ–Ğ²), cleanup old records |
| **Service Worker bugs** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | Feature flag Ğ´Ğ»Ñ SW, fallback Ğ´Ğ¾ online-only |
| **Slow Next.js build time** | ĞĞ¸Ğ·ÑŒĞºĞ° | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ–Ğ¹ | Incremental static regeneration, optimize dependencies |

### 13.2 Product Risks

| Ğ Ğ¸Ğ·Ğ¸Ğº | Ğ™Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ñ–ÑÑ‚ÑŒ | Ğ’Ğ¿Ğ»Ğ¸Ğ² | Mitigation |
|-------|-------------|-------|------------|
| **Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ¼Ğ°Ğ»Ğ¾Ğ³Ğ¾ Ğ±Ñ–Ğ·Ğ½ĞµÑÑƒ** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | Onboarding flow, video tutorials, ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ |
| **ĞĞ¸Ğ·ÑŒĞºĞ¸Ğ¹ retention** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | Email-Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ¸Ğ½Ğ³, Ğ½Ğ°Ğ³Ğ°Ğ´ÑƒĞ²Ğ°Ğ½Ğ½Ñ, value propositions |
| **ĞšĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ†Ñ–Ñ (Bitrix24, etc)** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | Ğ¤Ğ¾ĞºÑƒÑ Ğ½Ğ° offline-first, ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºÑƒ Ğ»Ğ¾ĞºĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ñƒ |
| **ĞĞ¸Ğ·ÑŒĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ñ–ÑÑ‚ÑŒ Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚Ğ¸** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | Free tier Ğ· Ğ¾Ğ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½ÑĞ¼Ğ¸, value-based pricing |
| **ĞŸĞ¾Ñ‚Ñ€ĞµĞ±Ğ° Ğ² Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–ÑÑ…** | Ğ’Ğ¸ÑĞ¾ĞºĞ° | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ½Ğ°Ğ¹Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ–ÑˆÑ– (ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ°), API Ğ´Ğ»Ñ Ñ€ĞµÑˆÑ‚Ğ¸ |

### 13.3 Business Risks

| Ğ Ğ¸Ğ·Ğ¸Ğº | Ğ™Ğ¼Ğ¾Ğ²Ñ–Ñ€Ğ½Ñ–ÑÑ‚ÑŒ | Ğ’Ğ¿Ğ»Ğ¸Ğ² | Mitigation |
|-------|-------------|-------|------------|
| **ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ½ÑŒĞ¾ ĞºĞ¾ÑˆÑ‚Ñ–Ğ² Ğ½Ğ° Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | Bootstrapping, Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° MRR, Ñ–Ğ½Ğ²ĞµÑÑ‚Ğ¾Ñ€Ğ¸ ÑĞº last resort |
| **ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ¸ Ğ· Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¾Ñ (WayForPay)** | ĞĞ¸Ğ·ÑŒĞºĞ° | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ¸Ğ¹ gateway (Fondy), Ñ‚ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿ĞµÑ€ĞµĞ´ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ¾Ğ¼ |
| **Ğ®Ñ€Ğ¸Ğ´Ğ¸Ñ‡Ğ½Ñ– Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ¸ (GDPR)** | ĞĞ¸Ğ·ÑŒĞºĞ° | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ñ–Ñ Ğ· ÑÑ€Ğ¸ÑÑ‚Ğ¾Ğ¼, Ñ‡Ñ–Ñ‚ĞºÑ– ToS/Privacy Policy |
| **Ğ‘Ñ€Ğ°Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸** | Ğ¡ĞµÑ€ĞµĞ´Ğ½Ñ | Ğ’Ğ¸ÑĞ¾ĞºĞ¸Ğ¹ | ĞÑƒÑ‚ÑĞ¾Ñ€ÑĞ¸Ğ½Ğ³ Ğ½Ğµ-ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… Ñ‡Ğ°ÑÑ‚Ğ¸Ğ½, Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° MVP |

### 13.4 Edge Cases

**Ğ”Ğ°Ğ½Ñ–:**
- [ ] Ğ”ÑƒĞ¶Ğµ Ğ´Ğ¾Ğ²Ğ³Ñ– Ñ–Ğ¼ĞµĞ½Ğ°/Ğ½Ğ°Ğ·Ğ²Ğ¸ (>1000 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ²)
- [ ] Ğ¡Ğ¿ĞµÑ†Ñ–Ğ°Ğ»ÑŒĞ½Ñ– ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¸ (emoji, ĞºĞ¸Ñ€Ğ¸Ğ»Ğ¸Ñ†Ñ Ğ² email)
- [ ] Null/undefined values Ğ² custom_fields
- [ ] Ğ¦Ğ¸ĞºĞ»Ñ–Ñ‡Ğ½Ñ– Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ– (ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ â†’ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚ â†’ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ñ–Ñ)
- [ ] Ğ’Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ workspace Ğ· Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¼Ğ¸ ÑƒĞ³Ğ¾Ğ´Ğ°Ğ¼Ğ¸

**Sync:**
- [ ] ĞšĞ¾Ğ½Ñ„Ğ»Ñ–ĞºÑ‚ Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑÑƒ Ğ½Ğ° 2 Ğ¿Ñ€Ğ¸ÑÑ‚Ñ€Ğ¾ÑÑ…
- [ ] Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ· Ğ¿Ğ¾Ğ³Ğ°Ğ½Ğ¸Ğ¼ Ñ–Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğ¾Ğ¼ (Ñ‡Ğ°ÑÑ‚ĞºĞ¾Ğ²Ñ– Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ¸)
- [ ] ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ²Ğ½ĞµĞ½Ğ½Ñ sync queue (>1000 items)
- [ ] Ğ—Ğ¼Ñ–Ğ½Ğ° ÑÑ…ĞµĞ¼Ğ¸ Ğ‘Ğ” Ğ¿Ñ–Ğ´ Ñ‡Ğ°Ñ offline (breaking changes)

**Permissions:**
- [ ] Ğ—Ğ¼Ñ–Ğ½Ğ° Ñ€Ğ¾Ğ»Ñ– Ğ½Ğ° Ğ½Ğ¸Ğ¶Ñ‡Ñƒ Ğ¿Ñ–Ğ´ Ñ‡Ğ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ñ— ÑĞµÑÑ–Ñ—
- [ ] Ğ’Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° Ğ·Ñ– ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ğ¸ pipeline (reassign ÑƒĞ³Ğ¾Ğ´Ğ¸)
- [ ] Owner Ğ¿Ğ¾ĞºĞ¸Ğ´Ğ°Ñ” workspace (transfer ownership)
- [ ] ĞĞ´Ğ½Ğ¾Ñ‡Ğ°ÑĞ½Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑÑƒ (race condition)

**ĞĞ¿Ğ»Ğ°Ñ‚Ğ°:**
- [ ] Downgrade Ğ² ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ñ– Ğ¼Ñ–ÑÑÑ†Ñ (Ğ¿Ñ€Ğ¾Ğ¿Ğ¾Ñ€Ñ†Ñ–Ğ¹Ğ½Ğµ Ğ¿Ğ¾Ğ²ĞµÑ€Ğ½ĞµĞ½Ğ½Ñ?)
- [ ] ĞĞµ Ğ¿Ñ€Ğ¾Ğ¹ÑˆĞ¾Ğ² Ğ¿Ğ»Ğ°Ñ‚Ñ–Ğ¶ (grace period 7 Ğ´Ğ½Ñ–Ğ²)
- [ ] Ğ’Ñ–Ğ´Ğ¼Ñ–Ğ½Ğ° Ğ¿Ñ–Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ²Ñ–Ğ´Ñ€Ğ°Ğ·Ñƒ Ğ¿Ñ–ÑĞ»Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸ (refund?)
- [ ] Ğ—Ğ¼Ñ–Ğ½Ğ° Ğ²Ğ°Ğ»ÑÑ‚Ğ¸ (UAH â†’ USD) â€” recalculate?

**Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ edge cases:**

```typescript
// __tests__/edge-cases.test.ts
describe('Edge Cases', () => {
  it('should handle very long contact names', async () => {
    const longName = 'a'.repeat(10000)
    const result = await createContact({
      first_name: longName,
      last_name: 'Test'
    })
    
    expect(result.error).toBeDefined() // ĞœĞ°Ñ” Ğ±ÑƒÑ‚Ğ¸ Ğ²Ğ°Ğ»Ñ–Ğ´Ğ°Ñ†Ñ–Ğ¹Ğ½Ğ° Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ°
  })
  
  it('should resolve sync conflicts (last write wins)', async () => {
    const contact = await createContact({ first_name: 'John' })
    
    // Device 1: update offline
    await updateContactOffline(contact.id, { first_name: 'John Updated' })
    
    // Device 2: update offline
    await updateContactOffline(contact.id, { first_name: 'John Modified' })
    
    // Sync both
    await syncManager.sync()
    
    // Last update should win
    const synced = await getContact(contact.id)
    expect(synced.first_name).toBe('John Modified')
  })
  
  it('should handle workspace deletion with active deals', async () => {
    const workspace = await createWorkspace()
    const deal = await createDeal({ workspace_id: workspace.id })
    
    const result = await deleteWorkspace(workspace.id)
    
    // Should soft delete and archive
    expect(result.success).toBe(true)
    expect(result.archived_deals).toBe(1)
  })
})
```

---

## 14. Development Roadmap

### 14.1 Phase 1: MVP (ĞœÑ–ÑÑÑ†Ñ– 1-5)

**ĞœĞµÑ‚Ğ°:** ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ product-market fit Ğ· Ğ¼Ñ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¼ Ğ½Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ¼ Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹.

**Deliverables:**
- [ ] Working product Ğ½Ğ° Vercel + Supabase
- [ ] 10 beta users
- [ ] Basic documentation
- [ ] Legal docs (Privacy Policy, ToS)

**Team:**
- 1 Fullstack Developer (Next.js + Supabase)
- 0.5 UI/UX Designer (ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚)

**Budget:** $0 (Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ñ‡Ğ°Ñ)

### 14.2 Phase 2: Launch (ĞœÑ–ÑÑÑ†Ñ– 6-8)

**ĞœĞµÑ‚Ğ°:** ĞŸÑƒĞ±Ğ»Ñ–Ñ‡Ğ½Ğ¸Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº, Ğ¿ĞµÑ€ÑˆÑ– Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ– ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¸.

**Features:**
- [ ] Onboarding flow
- [ ] In-app help/docs
- [ ] Email notifications
- [ ] Basic integrations (Nova Poshta)
- [ ] CSV Import/Export
- [ ] User feedback ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°

**Marketing:**
- [ ] Landing page (SEO-optimized)
- [ ] Product Hunt launch
- [ ] Facebook/Instagram ads (Ğ¼Ğ°Ğ»Ğ¸Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚)
- [ ] Ukrainian business forums
- [ ] YouTube demos

**Target:**
- 100 MAU
- 10 paying customers
- $500 MRR

**Budget:** $2,000 (ads, tools)

### 14.3 Phase 3: Growth (ĞœÑ–ÑÑÑ†Ñ– 9-12)

**ĞœĞµÑ‚Ğ°:** ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾ 1,000 ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ², $5k MRR.

**Features:**
- [ ] Email integration
- [ ] SMS integration
- [ ] Advanced automation
- [ ] Mobile apps (React Native?)
- [ ] Advanced analytics
- [ ] Team collaboration features

**Infrastructure:**
- [ ] Migrate to paid Supabase tier
- [ ] Setup monitoring (Sentry, Datadog)
- [ ] CI/CD optimization
- [ ] Performance tuning

**Team:**
- +1 Backend Developer
- +1 Support (part-time)

**Budget:** $10,000 (infrastructure, team, ads)

### 14.4 Phase 4: Scale (ĞœÑ–ÑÑÑ†Ñ– 13-24)

**ĞœĞµÑ‚Ğ°:** Ğ”Ğ¾Ğ¼Ñ–Ğ½ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ½Ğ° ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ğ¼Ñƒ Ñ€Ğ¸Ğ½ĞºÑƒ, Ñ€Ğ¾Ğ·ÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ Ğ½Ğ° ĞŸĞ¾Ğ»ÑŒÑ‰Ñƒ/Ğ ÑƒĞ¼ÑƒĞ½Ñ–Ñ.

**Features:**
- [ ] Public API
- [ ] Marketplace (integrations)
- [ ] White-label
- [ ] Enterprise features (SSO, audit logs)
- [ ] Multi-language (Polish, English)

**Infrastructure:**
- [ ] Migrate to VPS (Hetzner/AWS)
- [ ] Redis + RabbitMQ
- [ ] Kubernetes (optional)
- [ ] Multi-region deployment

**Team:**
- +2 Developers
- +1 DevOps
- +1 Customer Success
- +1 Marketing

**Target:**
- 10,000 MAU
- 500 paying customers
- $25,000 MRR

**Budget:** $50,000 (team, infrastructure, marketing)

### 14.5 Milestones

```
Month 1  â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  Setup + Auth
Month 2  â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  Core Features (Contacts, Companies)
Month 3  â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  Deals + Pipeline
Month 4  â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘  Tasks + Products + Analytics
Month 5  â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘  PWA + Offline + Polish â†’ MVP DONE
Month 6  â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘  Onboarding + Docs
Month 7  â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘  Nova Poshta + Marketing
Month 8  â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘  Launch + First Customers
Month 9  â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘  Email/SMS Integrations
Month 10 â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘ Automation + Advanced Features
Month 11 â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ Mobile Apps (optional)
Month 12 âœ… 1000 users, $5k MRR
```

---

## 15. Migration Plan (MVP â†’ VPS Scale)

### 15.1 When to Migrate

**Ğ¢Ñ€Ğ¸Ğ³ĞµÑ€Ğ¸ Ğ¼Ñ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ—:**

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Free Tier Limit | Current Usage | Action |
|---------|----------------|---------------|--------|
| **Database Size** | 500 MB | >400 MB | Upgrade to Supabase Pro OR Migrate |
| **Storage** | 1 GB | >800 MB | Upgrade OR Migrate |
| **API Requests** | 500k/Ğ¼Ñ–Ñ | >400k/Ğ¼Ñ–Ñ | Upgrade OR Migrate |
| **Concurrent Connections** | 60 | >50 | Upgrade OR Migrate |
| **MRR** | â€” | >$5,000 | Consider migration for cost optimization |

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** ĞœÑ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ Ğ½Ğ° VPS Ğ¼Ğ°Ñ” ĞµĞºĞ¾Ğ½Ğ¾Ğ¼Ñ–Ñ‡Ğ½Ğ¸Ğ¹ ÑĞµĞ½Ñ Ğ¿Ñ€Ğ¸ MRR >$5k (Ğ¼Ğ¾Ğ¶Ğ½Ğ° ÑĞ¾Ğ±Ñ– Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ Ñ–Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ).

### 15.2 Migration Strategy

**ĞŸÑ–Ğ´Ñ…Ñ–Ğ´:** Blue-Green Deployment (zero downtime)

**Ğ•Ñ‚Ğ°Ğ¿Ğ¸:**

#### Stage 1: Preparation (1-2 Ñ‚Ğ¸Ğ¶Ğ½Ñ–)
- [ ] Setup VPS (Hetzner/AWS/DigitalOcean)
- [ ] Install Docker + Docker Compose
- [ ] Provision Postgres, Redis, RabbitMQ
- [ ] Setup monitoring (Prometheus, Grafana)
- [ ] Configure backups

**VPS Stack:**
```yaml
# docker-compose.yml
version: '3.8'

services:
  postgres:
    image: postgres:16-alpine
    volumes:
      - postgres_data:/var/lib/postgresql/data
    environment:
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    ports:
      - "5432:5432"
  
  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"
  
  rabbitmq:
    image: rabbitmq:3-management-alpine
    volumes:
      - rabbitmq_data:/var/lib/rabbitmq
    ports:
      - "5672:5672"
      - "15672:15672"
  
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      DATABASE_URL: postgres://user:pass@postgres:5432/crm
      REDIS_URL: redis://redis:6379
      RABBITMQ_URL: amqp://rabbitmq:5672
    depends_on:
      - postgres
      - redis
      - rabbitmq

volumes:
  postgres_data:
  redis_data:
  rabbitmq_data:
```

#### Stage 2: Data Migration (2-3 Ğ´Ğ½Ñ–)
- [ ] Export data from Supabase (pg_dump)
- [ ] Import to new Postgres
- [ ] Verify data integrity
- [ ] Setup replication (Supabase â†’ VPS) Ğ´Ğ»Ñ sync

```bash
# Export from Supabase
pg_dump $SUPABASE_DATABASE_URL > backup.sql

# Import to VPS
psql $VPS_DATABASE_URL < backup.sql

# Verify
psql $VPS_DATABASE_URL -c "SELECT COUNT(*) FROM contacts;"
```

#### Stage 3: Application Updates (1 Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ)
- [ ] Update database connection (Supabase â†’ Postgres)
- [ ] Replace Supabase Auth Ğ· Ğ²Ğ»Ğ°ÑĞ½Ğ¸Ğ¼ (NextAuth.js Ğ°Ğ±Ğ¾ Clerk)
- [ ] Replace Supabase Storage Ğ· S3/MinIO
- [ ] Replace Supabase Realtime Ğ· Socket.io + Redis Pub/Sub
- [ ] Update offline sync (endpoints)

**Code changes:**

```typescript
// Before (Supabase)
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY)
await supabase.from('contacts').select('*')

// After (Direct Postgres)
import { Pool } from 'pg'
const pool = new Pool({ connectionString: process.env.DATABASE_URL })
const result = await pool.query('SELECT * FROM contacts WHERE workspace_id = $1', [workspaceId])
```

**Realtime before/after:**

```typescript
// Before (Supabase Realtime)
supabase.channel('deals-changes')
  .on('postgres_changes', { ... }, callback)
  .subscribe()

// After (Socket.io + Redis)
io.on('connection', (socket) => {
  socket.on('subscribe:deals', (workspaceId) => {
    socket.join(`workspace:${workspaceId}`)
  })
})

// On deal update
await redis.publish(`workspace:${workspaceId}:deals`, JSON.stringify(deal))
```

#### Stage 4: Testing (1 Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ)
- [ ] Load testing (Artillery/k6)
- [ ] Integration tests
- [ ] Manual QA
- [ ] Performance benchmarks

```bash
# Load test example (k6)
k6 run --vus 100 --duration 5m load-test.js
```

#### Stage 5: Gradual Rollout (1-2 Ñ‚Ğ¸Ğ¶Ğ½Ñ–)
- [ ] 10% traffic to new VPS (via DNS or Load Balancer)
- [ ] Monitor errors, performance
- [ ] 50% traffic
- [ ] 100% traffic
- [ ] Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ Supabase

**DNS-based rollout (Cloudflare):**
```
crm-saas.com â†’ Load Balancer
  â”œâ”€ 10% â†’ VPS (new)
  â””â”€ 90% â†’ Vercel (old)
```

#### Stage 6: Cleanup
- [ ] Export Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ… Ğ· Supabase
- [ ] Cancel Supabase subscription
- [ ] Update documentation
- [ ] Post-mortem meeting

### 15.3 Cost Comparison

**Free Tier (MVP):**
```
Vercel:      $0
Supabase:    $0
Domain:      $10/Ñ€Ñ–Ğº
Total:       ~$1/Ğ¼Ñ–Ñ
```

**Paid Tier (Supabase Pro + Vercel Pro):**
```
Vercel Pro:     $20/Ğ¼Ñ–Ñ
Supabase Pro:   $25/Ğ¼Ñ–Ñ
Domain:         $1/Ğ¼Ñ–Ñ
Total:          $46/Ğ¼Ñ–Ñ
```

**VPS (Self-hosted):**
```
Hetzner VPS (CPX31): $15/Ğ¼Ñ–Ñ (4 vCPU, 8GB RAM, 160GB SSD)
Cloudflare (CDN):     $0 (free tier)
Backups:              $5/Ğ¼Ñ–Ñ
Monitoring (Sentry):  $26/Ğ¼Ñ–Ñ (10k events)
Total:                $46/Ğ¼Ñ–Ñ
```

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** ĞĞ° ÑÑ‚Ğ°Ñ€Ñ‚Ñ– VPS Ñ– Supabase Pro ĞºĞ¾ÑˆÑ‚ÑƒÑÑ‚ÑŒ Ğ¾Ğ´Ğ½Ğ°ĞºĞ¾Ğ²Ğ¾, Ğ°Ğ»Ğµ VPS ĞºÑ€Ğ°Ñ‰Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒÑ”Ñ‚ÑŒÑÑ.

**ĞŸÑ€Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±ÑƒĞ²Ğ°Ğ½Ğ½Ñ– (1000+ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ²):**
```
Supabase Pro + overages: $100-500/Ğ¼Ñ–Ñ
VPS (dedicated): $100/Ğ¼Ñ–Ñ + Ğ¼ĞµĞ½ĞµĞ´Ğ¶Ğ¼ĞµĞ½Ñ‚
```

**Breakeven point:** ~500 Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ñ… ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ² / $5k MRR.

### 15.4 Rollback Plan

**Ğ¯ĞºÑ‰Ğ¾ Ğ¼Ñ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ Ğ¹Ğ´Ğµ Ğ¿Ğ¾Ğ³Ğ°Ğ½Ğ¾:**

1. **Immediate rollback** (< 1 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ°)
   - Switch DNS back to Vercel/Supabase
   - All traffic on old infrastructure

2. **Data sync** (1-2 Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸)
   - Sync changes made on VPS back to Supabase
   - Verify integrity

3. **Root cause analysis**
   - What went wrong?
   - Fix issues

4. **Retry migration**
   - Plan B or postpone

**Checkpoint system:**
- Before each stage: snapshot DB + Redis
- Rollback = restore snapshot

---

## 16. Cost Model (Free â†’ Paid)

### 16.1 Free Tier Economics

**User acquisition cost (CAC):**
- Organic (SEO, Product Hunt): $0
- Paid ads: ~$10/user (Facebook/Google)
- Target: 70% organic, 30% paid

**Monthly cost per free user:**
```
Infrastructure:  $0 (free tier)
Support:         ~$0.50 (community forum)
Total:           $0.50/user/Ğ¼Ñ–Ñ
```

**Sustainable free users:** Ğ”Ğ¾ 10,000 (Ğ¿Ñ€Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ– free tiers)

**Conversion funnel:**
```
1000 visitors â†’ 100 signups (10%) â†’ 10 active users (10%) â†’ 1 paid (10%)
```

**Target conversion rate (free â†’ paid):** 10% Ğ¿Ñ–ÑĞ»Ñ 3 Ğ¼Ñ–ÑÑÑ†Ñ–Ğ² Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ

### 16.2 Paid Tier Economics

**Starter ($299 UAH / $7.50 USD):**
```
Revenue:           $7.50/Ğ¼Ñ–Ñ
Infrastructure:    $1.50/Ğ¼Ñ–Ñ (Supabase Pro share)
Support:           $1.00/Ğ¼Ñ–Ñ (email)
Payment fees:      $0.30/Ğ¼Ñ–Ñ (4%)
Total Cost:        $2.80/Ğ¼Ñ–Ñ
Profit Margin:     $4.70/Ğ¼Ñ–Ñ (63%)
```

**Pro ($799 UAH / $20 USD):**
```
Revenue:           $20/Ğ¼Ñ–Ñ
Infrastructure:    $3/Ğ¼Ñ–Ñ
Support:           $2/Ğ¼Ñ–Ñ (priority)
Payment fees:      $0.80/Ğ¼Ñ–Ñ
Total Cost:        $5.80/Ğ¼Ñ–Ñ
Profit Margin:     $14.20/Ğ¼Ñ–Ñ (71%)
```

**LTV (Lifetime Value):**
- Avg subscription length: 18 Ğ¼Ñ–ÑÑÑ†Ñ–Ğ² (based on industry avg)
- Churn rate: 5%/Ğ¼Ñ–Ñ
- LTV (Starter): $7.50 Ã— 18 = $135
- LTV (Pro): $20 Ã— 18 = $360

**CAC Payback Period:**
- Starter: $10 CAC / $4.70 profit = 2.1 Ğ¼Ñ–ÑÑÑ†Ñ–
- Pro: $10 CAC / $14.20 profit = 0.7 Ğ¼Ñ–ÑÑÑ†Ñ–

### 16.3 Unit Economics

**At scale (1000 paying customers):**

**Revenue:**
```
500 Starter Ã— $7.50  = $3,750
400 Pro Ã— $20        = $8,000
100 Enterprise (avg) = $10,000
Total MRR:             $21,750
Annual Run Rate:       $261,000
```

**Costs:**
```
Infrastructure:   $5,000/Ğ¼Ñ–Ñ (VPS, CDN, backups)
Team (5 people):  $10,000/Ğ¼Ñ–Ñ (Ukraine salaries)
Support:          $2,000/Ğ¼Ñ–Ñ
Marketing:        $3,000/Ğ¼Ñ–Ñ
Tools/SaaS:       $500/Ğ¼Ñ–Ñ
Total:            $20,500/Ğ¼Ñ–Ñ
Net Profit:       $1,250/Ğ¼Ñ–Ñ (6% margin)
```

**ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯:** Low margin Ğ½Ğ° Ğ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ Ñ‡ĞµÑ€ĞµĞ· Ñ–Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ñ–Ñ— Ğ² Ñ€Ğ¾Ğ·Ğ²Ğ¸Ñ‚Ğ¾Ğº. Target: 20-30% margin.

### 16.4 Pricing Strategy

**Psychology:**
- Free tier: "foot in the door", habit formation
- Starter: "affordable upgrade", perfect for solo/micro businesses
- Pro: "professional tier", for teams
- Enterprise: "custom pricing", for large businesses

**Value-based pricing:**
- Starter: Saves ~5 Ğ³Ğ¾Ğ´Ğ¸Ğ½/Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ â†’ $100/Ğ¼Ñ–Ñ value â†’ $7.50 pricing (13Ã— ROI)
- Pro: Saves ~20 Ğ³Ğ¾Ğ´Ğ¸Ğ½/Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ â†’ $400/Ğ¼Ñ–Ñ value â†’ $20 pricing (20Ã— ROI)

**Anchoring:**
- Show annual pricing (2 Ğ¼Ñ–ÑÑÑ†Ñ– Ğ±ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¾) â†’ higher perceived value
- Cross-out "regular price" on landing page

**Price elasticity testing:**
- A/B test: $299 vs $349 UAH Ğ´Ğ»Ñ Starter
- Measure conversion rate

### 16.5 Revenue Projections

**Conservative (Year 1):**
```
Month 1-3:   0 paying customers (MVP development)
Month 4-6:   10 customers â†’ $75 MRR
Month 7-9:   50 customers â†’ $500 MRR
Month 10-12: 100 customers â†’ $1,500 MRR
Year 1 Total: $5,000 revenue
```

**Optimistic (Year 1):**
```
Month 6:  50 customers â†’ $500 MRR
Month 12: 500 customers â†’ $7,500 MRR
Year 1 Total: $30,000 revenue
```

**Target (Year 2):**
```
Month 18: 1,000 customers â†’ $15,000 MRR
Month 24: 2,000 customers â†’ $35,000 MRR
Year 2 Total: $300,000 revenue
```

### 16.6 Fundraising (Optional)

**Bootstrap first:** Aim for $5k MRR before considering investment.

**If needed:**
- Pre-seed: $50k-100k (Ukrainian angel investors, UVCA)
- Seed: $300k-500k (after $5k MRR, clear growth)

**Use of funds:**
- Team expansion (2-3 developers)
- Marketing ($20k budget)
- Infrastructure
- Legal/Compliance

**Dilution:** Target <20% for pre-seed, <25% for seed.

---

## Conclusion

Ğ¦ĞµĞ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ²Ğ½Ñƒ Ñ‚ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ñƒ Ñ‚Ğ° Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²Ñƒ ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Ğ´Ğ»Ñ CRM SaaS Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñƒ, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñƒ Ğ´Ğ¾ Ñ–Ğ¼Ğ¿Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ—. Ğ’ÑÑ– Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ– Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ Ğ·Ñ€Ğ¾Ğ±Ğ»ĞµĞ½Ñ– Ğ· ÑƒÑ€Ğ°Ñ…ÑƒĞ²Ğ°Ğ½Ğ½ÑĞ¼:

1. âœ… **Free tier constraints** â€” ĞŸÑ€Ğ°Ñ†ÑÑ” Ğ½Ğ° Vercel + Supabase Ğ±ĞµĞ·ĞºĞ¾ÑˆÑ‚Ğ¾Ğ²Ğ½Ğ¾
2. âœ… **Mobile-first** â€” UI/UX Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ– Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ñ–Ğ»ÑŒĞ½Ğ¸Ñ… Ğ¿Ñ€Ğ¸ÑÑ‚Ñ€Ğ¾Ñ—Ğ²
3. âœ… **Offline-first** â€” IndexedDB + Service Worker + Sync Queue
4. âœ… **Ukrainian market** â€” Ğ›Ğ¾ĞºĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ, ĞĞ¾Ğ²Ğ° ĞŸĞ¾ÑˆÑ‚Ğ°, GDPR + UA Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ´Ğ°Ğ²ÑÑ‚Ğ²Ğ¾
5. âœ… **Scalability** â€” Ğ§Ñ–Ñ‚ĞºĞ¸Ğ¹ ÑˆĞ»ÑÑ… Ğ¼Ñ–Ğ³Ñ€Ğ°Ñ†Ñ–Ñ— Ğ½Ğ° VPS
6. âœ… **Business viability** â€” Ğ Ğ¾Ğ·Ñ€Ğ°Ñ…ÑƒĞ½Ğ¾Ğº unit economics, pricing strategy

**ĞĞ°ÑÑ‚ÑƒĞ¿Ğ½Ñ– ĞºÑ€Ğ¾ĞºĞ¸:**
1. Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ GitHub Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ğ¹
2. Setup Next.js 16 + Supabase
3. Ğ†Ğ¼Ğ¿Ğ»ĞµĞ¼ĞµĞ½Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ FSD ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ
4. ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¸ Ğ· Sprint 1: Authentication + Workspaces

**Ğ—Ğ°ÑƒĞ²Ğ°Ğ¶ĞµĞ½Ğ½Ñ:** Ğ’ÑÑ– Ñ–Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ½Ñ– Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ (ĞŸĞ Ğ•Ğ”ĞŸĞĞ›ĞĞ–Ğ•ĞĞĞ¯) Ñ‡Ñ–Ñ‚ĞºĞ¾ Ğ¿Ğ¾Ğ¼Ñ–Ñ‡ĞµĞ½Ñ– Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ–. ĞŸÑ€Ğ¸ Ğ½ĞµĞ¾Ğ±Ñ…Ñ–Ğ´Ğ½Ğ¾ÑÑ‚Ñ– Ñ—Ñ… Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ¿ĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ Ğ¿Ñ–ÑĞ»Ñ MVP.

---

**Ğ’ĞµÑ€ÑÑ–Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** 1.0  
**Ğ”Ğ°Ñ‚Ğ° Ğ¾ÑÑ‚Ğ°Ğ½Ğ½ÑŒĞ¾Ğ³Ğ¾ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ:** 26 Ğ³Ñ€ÑƒĞ´Ğ½Ñ 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ready for Development
